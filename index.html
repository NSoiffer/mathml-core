<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MathML Core</title>
    <link rel="stylesheet" href="style.css" type="text/css"/>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common"
            class="remove"></script>
    <script class="remove">
      var respecConfig = {
          specStatus: "ED",
          editors: [{
              name: "David Carlisle",
              url: "https://davidcarlisle.github.io/dcarlisle/david/",
              company: "NAG"
          }, {
              name: "Frédéric Wang",
              url: "http://frederic-wang.fr",
              company: "Igalia"
          }],
          wg: "MathML Refresh Community Group",
          wgURI: "https://www.w3.org/community/mathml4/",
          edDraftURI: "https://mathml-refresh.github.io/mathml-core/",
          shortName: "mathml-core",
          testSuiteURI: "https://w3c-test.org/mathml/",
          issueBase: "https://github.com/mathml-refresh/mathml/issues/",
          implementationReportURI: "https://build-chromium.igalia.com/mathml/wpt/summary.html",
          otherLinks: [{
              key: "Participate",
              data: [{
                  value: 'MathML Refresh CG',
                  href: 'https://www.w3.org/community/mathml4/'
              }, {
                  value: 'File a bug',
                  href: 'https://github.com/mathml-refresh/mathml/issues'
              }, {
                  value: 'Commit History',
                  href: 'https://github.com/mathml-refresh/mathml-core/commits/gh-pages'
              }]
          }],
          localBiblio: {
              "MATHML4": {
                  title: "Mathematical Markup Language (MathML) Version 4.0",
                  authors: [
                      "David Carlisle et al."
                  ],
                  status: "WD",
                  href: "https://mathml-refresh.github.io/mathml/"
              },
              "TEXBOOK": {
                  title: "The TeXBook",
                  date: "1984",
                  authors: [
                      "Knuth, Donald E."
                  ],
                  publisher: "Addison-Wesley Professional",
                  id: "ISBN9780201134483"
              },
              "OPEN-TYPE-MATH-ILLUMINATED": {
                  title: "OpenType Math Illuminated",
                  date: "2009",
                  authors: [
                      "Ulrik Vieth"
                  ],
                  href: "http://www.tug.org/TUGboat/tb30-1/tb94vieth.pdf",
              },
              "VALIDATOR-SCHEMAS": {
                  title: "HTML5-SVG-MathML schema for Nu Html Checker",
                  authors: [
                      "Henri Sivonen et al."
                  ],
                  href: "https://github.com/validator/validator/blob/master/schema/.drivers/html5-svg-mathml.rnc"
              },
              "MATH-VARIANT": {
                  title: "math-variant explainer",
                  authors: [
                      "Frédéric Wang"
                  ],
                  href: "https://github.com/mathml-refresh/mathml-css-proposals/blob/master/mathml-css-proposals/math-variant-explainer.md"
              },
              "MATH-STYLE-AND-SCRIPT-LEVEL": {
                  title: "math-script-level and math-style explainer",
                  authors: [
                      "Frédéric Wang"
                  ],
                  href: "https://github.com/mathml-refresh/mathml-css-proposals/blob/master/math-script-level-and-math-style-explainer.md"
              },
          }
      };
    </script>
    <script src="sorttable.js"></script>
  </head>
  <body>
    <section id="abstract">
      <p>
        This specification defines a core subset of Mathematical Markup
        Language, or MathML, that is suitable for browser implementation.
        MathML is a markup language for describing mathematical notation
        and capturing both its structure and content. The goal of MathML is to
        enable mathematics to be served, received, and processed on the World
        Wide Web, just as HTML has enabled this functionality for text.
      </p>
    </section>
    <section id="sotd">
      <p>
        This is a public copy of the editors’ draft. It is provided for
        discussion only and may change at any moment. Its publication here does
        not imply endorsement of its contents by W3C. Don’t cite this document
        other than as work in progress.
      </p>
    </section>
    <section id="introduction" class="informative">
      <h2>Introduction</h2>
      <p>
        The [[MATHML3]] specification has several shortcomings that make it
        hard to implement consistently accross web rendering engines or to
        extend with user-defined constructions e.g.
      </p>
      <ul>
        <li>It is a huge and standalone specification.</li>
        <li>It does not contain any detailed rendering rules.</li>
        <li>It is not driven by browser-implementation.</li>
        <li>It lacks automated testing.</li>
      </ul>
      <p>
        This MathML Core specification intends to address these issues by
        being as accurate as possible on the visual rendering of mathematical
        formulas using additional rules from the TeXBook’s Appendix G
        [[TEXBOOK]] and from the Open Font Format [[OPEN-FONT-FORMAT]],
        [[OPEN-TYPE-MATH-ILLUMINATED]]. It also relies on modern browser
        implementations and web technologies [[HTML]] clarifying interactions
        with them when needed or introducing new low-level primitives to
        improve the web platform layering. Parts of MathML 3 that do not
        fit well in this framework or are rarely used in practice have been
        omitted. Instead, they are described in a separate and larger
        [[MATHML4]] specification.
      </p>
      <p>
        By increasing the level of implementation details, focusing on a
        workable subset, following a browser-driven design and relying on
        automated web platform tests, this specification is expected to
        greatly improve MathML interoperability. Moreover, effort on MathML
        layering will enable users to implement the rest of the MathML 4
        specification, or more generally to extend MathML Core, using
        polyfills or converters.
      </p>
    </section>
    <section id="fundamentals" class="normative">
      <h2>MathML Fundamentals</h2>
      <section>
        <h3>Web Platform Integration</h3>
        <p>
          User agents must use a [[HTML]] parser to build a [[DOM]] tree from
          the source code of web pages. In particular, they must follow the
          rules describing when elements must be in the MathML namespace
          <code>http://www.w3.org/1998/Math/MathML</code> and must
          recognize the Named character references from [[HTML]].
          They must also take into account the following integration points
          between SVG, MathML and HTML as allowed by [[VALIDATOR-SCHEMAS]]:
        </p>
        <div class="issue" data-number="101">Improve description of
          integration points and refer to [[HTML]] instead of the validator
          schema.</div>
        <ol>
          <li>
            The <code>&lt;math&gt;</code> element can be used at any position
            permitted for phrasing content or inside SVG
            <code>&lt;foreignObject&gt;</code> elements.
          </li>
          <li>
            The <code>&lt;svg&gt;</code> element can be used inside
            <code>&lt;annotation-xml&gt;</code> elements with encoding
            <code>SVG1.1</code> or <code>image/svg+xml</code>.
          </li>
          <li>
            The <code>&lt;html&gt;</code> element and flow content can be used
            inside <code>&lt;annotation-xml&gt;</code> elements with encoding
            <code>application/xhtml+xml</code> or <code>text/html</code>.
          </li>
          <li>
            Any phrasing element can be used inside <code>&lt;mtext&gt;</code>
            elements.
          </li>
        </ol>
        <p>
          From this DOM tree, user agents must provide a visual representation
          of the document. The DOM tree may be dynamically modified using
          [[JAVASCRIPT]] and the user agents must keep the visual representation
          in synchronization with the DOM tree.
        </p>
        <div class="issue" data-number="100">Remove reference to semantics tag.</div>
        <p>
          When evaluating the SVG <code>requiredExtensions</code> attribute
          [[SVG]], user agents must claim support for the extension of name
          <code>http://www.w3.org/1998/Math/MathML</code>.
          An algorithm to decide the visible child of the
          <code>&lt;semantics&gt;</code> element is proposed in section
          <a href="#sematicsandpresentation">?</a>.
        </p>
        <p>
          User agents must support several CSS modules and use the user agent
          stylesheet described in
          <a href="#user-agent-stylesheet">Appendix B</a>.
          Details are given in the respective sections.
        </p>
        <div class="issue" data-number="83">Properly define DOM/IDL relationships.</div>
      </section>
      <section>
        <h3>MathML Attribute Values</h3>
        <dl>
          <dt><dfn data-dfn-type="dfn"
                   id="non-negative-integer">non-negative-integer</dfn></dt>
          <dd>A <code>&lt;non-negative-integer&gt;</code> value as defined in
            [[HTML]]
          </dd>
        </dl>
        <dl>
          <dt><dfn data-dfn-type="dfn"
                   id="length-percentage">length-percentage</dfn></dt>
          <dd>A <code>&lt;length-percentage&gt;</code> value as defined in
            [[CSS-VALUES]]
          </dd>
        </dl>
        <dl>
          <dt><dfn data-dfn-type="dfn" id="color">color</dfn></dt>
          <dd>A <code>&lt;color&gt;</code> value as defined in
            [[CSS-COLOR-3]]
          </dd>
        </dl>
        <dl>
          <dt><dfn data-dfn-type="boolean" id="boolean">boolean</dfn></dt>
          <dd>A <code>&lt;boolean&gt;</code> value is case-insensitively
            equal to <code>true</code> or <code>false</code>.
          </dd>
        </dl>
      </section>

      <section id="global-attributes">
        <h3>Global Attributes</h3>
        <p>
          The following attributes are common to and may be specified on all MathML
          elements:
        </p>
        <ul>
          <li><a href="#id-class-style-attributes"><code>id</code></a></li>
          <li><a href="#id-class-style-attributes"><code>class</code></a></li>
          <li><a href="#id-class-style-attributes"><code>style</code></a></li>
          <li><a href="#href-class-style-attributes"><code>href</code></a></li>
          <li><a href="#dir-attribute"><code>dir</code></a></li>
          <li><a href="#mathcolor-and-mathbackground-attributes"><code>mathbackground</code></a></li>
          <li><a href="#mathcolor-and-mathbackground-attributes"><code>mathcolor</code></a></li>
          <li><a href="#mathsize-attribute"><code>mathsize</code></a></li>
          <li><a href="#mathvariant-attribute"><code>mathvariant</code></a></li>
          <li><a href="#displaystyle-script-level-attributes"><code>displaystyle</code></a></li>
          <li><a href="#displaystyle-script-level-attributes"><code>scriptlevel</code></a></li>
        </ul>

        <p id="id-class-style-attributes">
          The <code>id</code>, <code>class</code>,
          <code>style</code> attributes have the syntax and semantic described
          in [[HTML]]. In particular,
          they are used to identify elements in links and scripting, affect
          CSS selectors, affect <span>getElementsByClassName()</span> and enable
          authors to do inline styling.
        </p>

        <div id="href-attribute">
          <p>
            The <code>href</code> has the syntax and semantic described
            in [[HTML]]
            for the <code>&lt;a&gt;</code> element.
            This attribute represents a hyperlink labeled by its contents.
            To fully implement this attribute, additional CSS properties for links
            must be specified in the user agent stylesheet
            as described in <a href="#user-agent-stylesheet">Appendix B</a>.
          </p>
        </div>

        <p id="dir-attribute">
          The <code>dir</code> attribute, if specified and not
          empty, must be case-insensitively equal to the
          value <code>ltr</code> or <code>ltr</code>.
          It is mapped to the CSS property <code>direction</code> defined in
          [[CSS-WRITING-MODES-3]].
          This attribute is used to set the directionality of math formulas, which is
          often <code>rtl</code> in Arabic speaking world.
        </p>

        <p id="mathcolor-and-mathbackground-attributes">The <code>mathcolor</code> and
          <code>mathbackground</code> attributes, if specified and not empty, must
          have a value that is a <a>color</a>.
          The <code>mathcolor</code> property describes the foreground fill color of
          an MathML text, bars etc and the background color of an element.
          They are mapped to the CSS properties <code>color</code> and
          <code>background-color</code> defined in
          [[CSS-COLOR-3]]
          and [[CSS-BACKGROUNDS-3]].
        </p>

        <p id="mathsize-attribute">The <code>mathsize</code>
          attribute, if specified and not empty, must
          have a value that is a valid <a>length-percentage</a>.
          The <code>mathsize</code> property indicates indicates the desired height
          of glyphs in math formulas but also scale other parts (spacing, shifts,
          line thickness of bars etc) accordingly.
          Is is mapped to the CSS property <code>font-size</code>
          from [[CSS-FONTS-3]].
        </p>

        <div class="note">
          Many of the above attributes are not useful in CSS-aware
          environments, but are preserved for backward compatibility reasons.
        </div>

        <div id="mathvariant-attribute">
          <p>
            The <code>mathvariant</code> attribute,
            if specified and not empty, must have a value that is one of:
          </p>
          <ul>
            <li><code>normal</code></li>
            <li><code>bold</code></li>
            <li><code>italic</code></li>
            <li><code>bold-italic</code></li>
            <li><code>double-struck</code></li>
            <li><code>bold-fraktur</code></li>
            <li><code>script</code></li>
            <li><code>bold-script</code></li>
            <li><code>fraktur</code></li>
            <li><code>sans-serif</code></li>
            <li><code>bold-sans-serif</code></li>
            <li><code>sans-serif-italic</code></li>
            <li><code>sans-serif-bold-italic</code></li>
            <li><code>monospace</code></li>
            <li><code>initial</code></li>
            <li><code>tailed</code></li>
            <li><code>looped</code></li>
            <li><code>stretched</code></li>
          </ul>
          <p>
            The <code>mathvariant</code> attribute defines logical classes of token
            elements. Each class provides a collection of typographically-related
            symbolic tokens with specific meaning within a given mathematical
            expression.
            For <code>mathvariant</code> values other than <code>normal</code>,
            this is done by using glyphs of
            Unicode's Mathematical Alphanumeric Symbols.
          </p>
          <p>
            Hence, the <code>mathvariant</code> attribute
            is mapped to new values of the CSS property <code>text-transform</code>
            defined in [[MATH-VARIANT]].
            More precisely, <code>normal</code> is mapped to <code>none</code>
            while all the other values the corresponding CSS value with the extra
            <code>math-</code> prefix.
          </p>
        </div>

        <div class="note">
          For <code>mathvariant</code> values other than <code>normal</code>,
          one can just directly use the corresponding Unicode
          characters. However, they are preserved for backward compatibility reasons.
          The <code>normal</code> value is still important to cancel automatic
          italic of the
          <a href="presentation.html#tokenmi"><code>&lt;mi&gt;</code></a> element.
        </div>

        <div id="displaystyle-script-level-attributes">
          <p>
            The <code>displaystyle</code> attribute, if specified and not
            empty, must be a <a>boolean</a>.
            It is mapped to the CSS property <code>math-style</code>
            defined in [[MATH-STYLE-AND-SCRIPT-LEVEL]].
            More precisely,  <code>true</code> is mapped to <code>display</code> and
            <code>false</code> to  <code>inline</code>.
            This attribute indicate whether formulas should try to minimize
            the logical height (value is <code>false</code>) or not
            (value is <code>true</code>) e.g. by changing the size of content or
            the layout of scripts.
          </p>
          <p>
            The <code>scriptlevel</code> attribute, if specified and not
            empty, must have value
            <code>+&lt;U&gt;</code>, <code>-&lt;U&gt;</code> or <code>&lt;U&gt;</code>
            where <code>&lt;U&gt;</code> is a
            <a>non-negative-integer</a>.
            It is mapped to the <code>math-script-level</code> property
            defined in [[MATH-STYLE-AND-SCRIPT-LEVEL]]
            More precisely,
            <code>+&lt;U&gt;</code>, <code>-&lt;U&gt;</code> and
            <code>&lt;U&gt;</code>
            are respectively mapped to
            <code>add(&lt;U&gt;)</code>
            <code>add(&lt;-U&gt;)</code>
            and <code>&lt;U&gt;</code>.
          </p>

          <p>
            <code>displaystyle</code> and <code>scriptlevel</code> values
            are automatically adjusted within MathML elements.
            To fully implement these attributes, additional CSS properties must be
            specified in the user agent stylesheet
            as described in <a href="#user-agent-stylesheet">Appendix B</a>.
          </p>

          <div class="note">
            T<sub>E</sub>X's <code>\displaystyle</code>, <code>\textstyle</code>,
            <code>\scriptstyle</code>, and <code>\scriptscriptstyle</code> correspond
            to <code>displaystyle</code> and <code>scriptlevel</code> as
            <code>true</code> and <code>0</code>,
            <code>false</code> and <code>0</code>,
            <code>false</code> and <code>1</code>,
            and <code>false</code> and 2, respectively.
          </div>
        </div>

      </section>

      <section id="top-level-math">
        <h3>The Top-Level <code>&lt;math&gt;</code> Element</h3>
        <p>
          The <code>&lt;math&gt;</code> element accepts the attributes described
          in section <a href="#global-attributes"></a> as well as the
          following attribute:
        </p>
        <ul id="math-attributes">
          <li><a href="#display-attribute"><code>display</code></a></li>
        </ul>
        <p id="display-attribute">
          The <code>display</code> attribute, if specified and not
          empty, must have value <code>block</code> or <code>inline</code>.
          To fully implement this attribute, additional CSS properties must be
          specified in the user agent stylesheet
          as described in <a href="#user-agent-stylesheet">Appendix B</a>.
        </p>
        <p>
          The layout algorithm of the <code>&lt;math&gt;</code> element
          is the same as the <code>&lt;mrow&gt;</code> element. User agents must
          ensure correct baseline alignment, centering, sizing etc of the
          <code>&lt;math&gt;</code> element.
        </p>
        <div class="note">
          T<sub>E</sub>X's display mode <code>$...$</code>
          and inline mode <code>$...$</code> correspond to
          <code>display="block"</code> and <code>display="inline"</code>
          respectively.
        </div>

      </section>

      <section id="text-and-math">
        <h3>Text and Math layout</h3>

        <section id="open-font-format">
          <h3>Open Font Format</h3>

          <p>Because math fonts generally contain very tall glyphs such as big integrals,
            using typographic metrics is important to avoid excessive line spacing of text.
            This behavior is specified in math fonts using the USE_TYPO_METRICS flag from
            the OS/2 table
            [[OPEN-FONT-FORMAT]] and user agents must honor that flag.
          </p>
          <p>
            Mathematical formulas can be viewed as an extension of standard text layout
            and thus user agents must be able to perfom
            complex text layout using fonts under the Open Font Format
            [[OPEN-FONT-FORMAT]]. In particular, they must implement bidirectional
            rendering and shaping of Arabic scripts.
          </p>
          <p>
            Mathematical formulas may mix standard text with other graphical outlines
            (e.g. fraction or top radical bars). For consistency, these outlines should
            be rendered the same way as normal text. In particular, user agents must be
            able to apply <code>visibility</code> and <code>color</code> CSS properties to them. They may
            also support similar CSS properties for text such as <code>text-shadow</code> or
            <code>opacity</code>.
          </p>
          <div id="openfontformat.p4">
            <p>Good mathematical rendering requires use of non-Unicode glyphs. Mathematical
              fonts may only provide these glyphs when the <code class="MATH">math</code>
              script tag is enabled and so user agents must ensure that the text within
              MathML token elements is rendered with that script tag. Some characters like
              primes already have script size by default and hence would be too small when
              used in a script position.
              Hence user agents must support glyph selections via the OpenType font feature
              <code class="MATH">ssty</code> (Script Style) in order to display such
              “prescripted” characters with the appropriate size.
              For bidirectional layout, Unicode defines character-level mirroring
              to transform a character into its mirrored form,
              for example U+0028 LEFT PARENTHESIS into U+0029 RIGHT PARENTHESIS.
              User agents must also support the OpenType font feature
              <code>rtlm</code> (Right-to-left mirrored forms)
              to allow glyph-level mirroring in cases where character-level is not enough
              [[OPEN-FONT-FORMAT]].
              At the time of writing, Unicode does not distinguish between Chancery and
              Spencerian style for the Unicode MATHEMATICAL SCRIPT characters. Some
              mathematical fonts rely on <code class="MATH">salt</code> or <code>ssXY</code> properties to provide
              both styles. User agents may support the CSS <code>font-variant-alternates</code>
              property and corresponding OpenType font features to enable page authors
              to get access to these styles [[CSS-FONTS-3]]
              [[OPEN-FONT-FORMAT]].</p>
          </div>
          <p>
            User agents must be able to read information from the
            OpenType MATH table [[OPEN-FONT-FORMAT]].
            In particular they must be able to read the values from the
            <code class="MATH">MathConstants</code> subtable.
            They must also be able to use the <code class="MATH">MathVariants</code> subtable
            to solve the following problem: given a particular default glyph shape and a
            certain width or height, find a variant shape glyph (or a construct created by
            putting several glyphs together) that has the required measurement.
            More information are provided in see section <a href="presentation.html#tokenmo"></a>.
          </p>
        </section>
        <section id="latex">
          <h3>LaTeX</h3>
          <p>
            Mathematical rendering rules in this document are implicitly based on
            MathML, OpenType MATH table and the TeXBook
            [[MATHML3] [[OPEN-FONT-FORMAT]] [[TEXBOOK]]. In this section, we
            describe more precisely some rules from the TeXBook.
          </p>
          <p>
            In addition to concepts similar to MathML’s <code>displaystyle</code> and
            <code>scriptlevel</code>, LaTeX has
            a “cramped” property, which is involved in the determination of script shifts.
            It is initially unset on the <code>math</code> element and in general
            all the children inherits the “cramped” property from their parent.
            However, it is set to true in the following children:
          </p>
          <ol>
            <li>The denominator of an <code>mfrac</code> element. See section <a href="presentation.html#mfrac"></a>.</li>
            <li>The subscripts of the <code>msub</code>, <code>msubsup</code>,
              <code>munder</code> and <code>munderover</code> elements.
              See section <a href="presentation.html#scriptsandlimits"></a>.
            </li>
            <li>The overscript of the
              <code>mover</code> and <code>munderover</code> elements when it is an <code>accent</code> per
              the MathML specification. See section <a href="presentation.html#scriptsandlimits"></a>.
            </li>
            <li>
              The children of the <code>msqrt</code> and <code>mroot</code>
              elements.
            </li>
          </ol>
          <p>
            To implement math spacing, the TeXBook defines eight basic types
            (<code>Ord</code> for ordinary atoms, <code>Op</code> for large operators,
            <code>Bin</code> for binary operations, <code>Rel</code> for relations,
            <code>Open</code> for opening fences, <code>Close</code> for closing fences,
            <code>Punct</code> for punctuations and <code>Inner</code> for a delimited subformula) and
            define an inter space for each pair of such types. In the present document,
            we only follow the spacing algorithm of MathML 3: by default the inter space
            is always zero and the spacing is produced by spacing elements like
            <code>mspace</code>, <code>mphantom</code> or <code>mpadded</code> or by the leading and trailing
            space around embellished operators.
          </p>
        </section>

      </section>
    </section>

      <section id="presentation-markup">
        <h2>Presentation Markup</h2>
        <section>
          <h2>Introduction</h2>

          <section id="boxmodel">
            <h3>Box Model</h3>

            <div id="boxmodel.p1">
              <p>User agents must also follow the rules described in section 4.7.14
                Embedded content, MathML of [[HTML]], in particular the equivalence with
                implicit <code>mtext</code> and <code>merror</code> to handle non-conforming MathML markup.</p>
            </div>
            <div id="boxmodel.p2">
              <p>MathML elements have the following box model. The <code>&lt;math&gt;</code> root may have
                inline or block display, as suggested in
                <a href="#user-agent-stylesheet">Appendix B</a>.
                Tabular MathML elements have table, table-row and
                table-cell display as discussed in section <a href="#tables"></a>.
                The <code>&lt;math&gt;</code> and <code>&lt;mtd&gt;</code> elements
                generate an anonymous <code>&lt;mrow&gt;</code> MathML box child that contains the boxes of
                their children and use the box parameters below to layout this anonymous
                <code>&lt;mrow&gt;</code> box.
                No line breaking can happen within MathML boxes and the min-content width is
                equal to the max-content width, these are simply called the intrinsic width.
                Each MathML box has the following parameters:</p>
            </div>
            <div id="boxmodel.p3">
              <ol id="I5">
                <li id="I5.i1">
                  <div id="I5.i1.p1">
                    <p>intrinsic width W.
                    </p>
                  </div>
                </li>
                <li id="I5.i2">
                  <div id="I5.i2.p1">
                    <p>logical width w, ascent above the origin a and descent below the
                      origin b. The height is then a + b.</p>
                  </div>
                </li>
                <li id="I5.i3">
                  <div id="I5.i3.p1">
                    <p>ink ascent A and descent B, corresponding to the exact box enclosing
                      ink of text and bars within the MathML box.</p>
                  </div>
                </li>
              </ol>
            </div>
            <figure id="F1">
              <img src="figures/boxmodel.svg"/>
              <figcaption>Generic Box Model for MathML elements</figcaption>
            </figure>
            <div id="boxmodel.p4">
              <p>For MathML element containing only text nodes or foreign elements, we assume
                that the content is simple enough to determine these values. For example,
                in most case, this is just a single text node and w = W.
                A MathML element containing only other MathML elements follow special rules to
                layout their children at position
                (x<sub>i</sub>, y<sub>i</sub>) with parameters
                W<sub>i</sub>, w<sub>i</sub>, a<sub>i</sub>, b<sub>i</sub>, A<sub>i</sub>,
                B<sub>i</sub>. Then as a general rule, its box parameters are given
                by taking the union of child boxes, that is:</p>

              <p>w = max<sub>1 ≤ i ≤ n</sub> (x<sub>i</sub> + w<sub>i</sub>) −
                max<sub>1 ≤ i ≤ n</sub> x<sub>i</sub></p>
              <p>W = max<sub>1 ≤ i ≤ n</sub> (x<sub>i</sub> + W<sub>i</sub>) −
                max<sub>1 ≤ i ≤ n</sub> x<sub>i</sub></p>
              <p>a = max<sub>1 ≤ i ≤ n</sub> (a<sub>i</sub> − y<sub>i</sub>)</p>
              <p>b = max<sub>1 ≤ i ≤ n</sub> (b<sub>i</sub> + y<sub>i</sub>)</p>
              <p>A = max<sub>1 ≤ i ≤ n</sub> (A<sub>i</sub> − y<sub>i</sub>)</p>
              <p>B = max<sub>1 ≤ i ≤ n</sub> (B<sub>i</sub> + y<sub>i</sub>)</p>
            </div>
            <div id="boxmodel.p5">
              <p>Note that the schemas in this document are drawn assuming left-to-right
                directionality. If the CSS <code>direction</code> is set to right-to-left, then the
                elements should be layout by making the x-axis pointing from right-to-left.
                In this document, we use the terminology of
                [[MATHML3]]: “leading”
                means “left” in right-to-left and “right” in right-to-left mode, while
                “trailing” means “right” in right-to-left and “left” in right-to-left
                mode.</p>
            </div>
            <div id="boxmodel.p6">
              <p>The <code class="MATH">MathItalicsCorrectionInfo</code> table contains the italic
                correction of some glyphs, which provides a measure of how slanted the
                glyphs are (see figure <a href="#F2"></a>). The
                <code class="MATH">MathTopAccentAttachment</code> table also contains a reference
                points that is used for the horizontal positioning of glyphs as an accent
                (see figure <a href="#F3"></a>). In later sections, we
                generalize this by claiming that all MathML boxes have italic correction
                and top accent attachment values. The values for glyphs are used to try and
                extend to token elements or to special boxes that do not change child metrics.
                Otherwise fallback values are used: 0 for italic correction and half
                the width of the box for top accent attachment.</p>
            </div>
            <figure id="F2">
              <img src="figures/italcorr.svg"/>
              <figcaption>Examples of italic correction for italic f and large integral</figcaption>
            </figure>
            <figure id="F3">
              <img src="figures/topaccent.svg"/>
              <figcaption>Example of top accent attachment for a circumflex accent</figcaption>
            </figure>
            <div id="boxmodel.p7">
              <p>The present document assumes that W, w, a, b, A, B, italic correction
                and top accent attachment are nonnegative values. If computations result
                in negative values, then they must be interpreted as being zero.
                Note that some MathML elements such as <code>mspace</code> or <code>mpadded</code> may set box
                dimensions to negative values.</p>
            </div>
          </section>
          <section id="layoutsteps">
            <h3>Layout Steps</h3>

            <div id="layoutsteps.p1">
              <p>For compatibility with HTML5 rendering, the MathML layout is performed in two
                independent steps:</p>
            </div>
            <div id="layoutsteps.p2">
              <ol id="I6">
                <li id="I6.i1">
                  <div id="I6.i1.p1">
                    <p>In the first step, we determine the intrinsic width W of MathML boxes.
                      To do so we just follow the description given in this document for each
                      MathML box. We rely on vertical positions x as well as values for
                      italic correction and top accent attachment. However, we ignore any vertical
                      positioning or metrics.</p>
                  </div>
                </li>
                <li id="I6.i2">
                  <div id="I6.i2.p1">
                    <p>In the second step, we do the final layout of MathML boxes following
                      the description given in this document. We obtain all the box metrics,
                      including the actual width w, vertical metrics a, b, A, B and
                      vertical positions y.</p>
                  </div>
                </li>
              </ol>
            </div>
            <div id="layoutsteps.p3">
              <p>In order to perform the first step independently of the second one, the
                horizontal metrics must not depend on the vertical metrics. As described in
                section <a href="#mpadded"></a>, this adds some restrictions on the possible pseudo-units
                of the <code>mpadded</code> element. As indicated in section <a href="#tokenmo"></a>,
                the width of size variants or of the glyph assembly used for vertical stretchy
                operators may depend on the target size to cover. Taking the maximum widths
                for all these size variants or for the glyph assembly during the first step
                makes the intrinsic width independent of the target size but may lead to a
                small over-estimation.</p>
            </div>
            <div id="layoutsteps.p4">
              <p>Each of this step is done recursively: the metrics of a given MathML box
                are determined from those of the child boxes. User agents must implement
                the “Exception for embellished operators” described in [[MATHML3]].
                This means that the actual stretching of operators described in section
                <a href="#tokenmo"></a> may be “delayed” until we reach the top of its embellished
                operator subtree. We then have to apply the current operation again
                to this embellished operator (intrinsic width determination or layout).
                Fortunately, such embellished operator subtrees are not deep in practice.</p>
            </div>
            <div id="layoutsteps.p5">
              <p>This document does not require support for operator stretching in table cells.
                The “delayed” stretching of all operators must then be performed when we
                arrive at the anonymous <code>&lt;mrow&gt;</code> child of <code>&lt;math&gt;</code> and <code>&lt;mtd&gt;</code>
                elements.
                That way, the intrinsic width of this anonymous <code>&lt;mrow&gt;</code> is well-defined
                for the layout of <code>mtable</code> elements and of the containers of the
                <code>&lt;math&gt;</code> element. Similarly, the final layout of this anonymous
                <code>&lt;mrow&gt;</code> is already done when we want to perform the one of its ancestors.</p>
            </div>
          </section>
        </section>

        <section id="tokenelements">
          <h2>Token Elements</h2>

          <section id="tokenmi">
            <h3>Identifier <code>&lt;mi&gt;</code></h3>
            <p>
              The <code>&lt;mi&gt;</code> element represents a symbolic name or
              arbitrary text
              that should be rendered as an identifier. Identifiers can include
              variables, function names, and symbolic constants.
            </p>
            <p>
              The <code>&lt;mi&gt;</code> element accepts the attributes described
              in section <a href="#global-attributes"></a>. Its layout algorithm is
              the same as the
              <a href="#tokenmtext"><code>&lt;mtext&gt;</code> element</a>.
            </p>
            <p>
              The User Agent stylesheet must set <code>text-transform: math-</code>
              on the <code>&lt;mi&gt;</code> element as described in
              <a href="#user-agent-stylesheet">Appendix B</a>.
            </p>
          </section>

          <section id="tokenmn">
            <h3>Number <code>&lt;mn&gt;</code></h3>
            <p>
              The <code>&lt;mn&gt;</code> element represents a "numeric literal" or
              other data that should be rendered as a numeric literal. Generally
              speaking, a numeric literal is a sequence of digits, perhaps including a
              decimal point, representing an unsigned integer or real number.
            </p>
            <p>
              The <code>&lt;mn&gt;</code> element accepts the attributes described
              in section <a href="#global-attributes"></a>. Its layout algorithm is
              the same as the
              <a href="#tokenmtext"><code>&lt;mtext&gt;</code> element</a>.
            </p>
          </section>

          <section id="tokenmo">
            <h3>Operator, Fence, Separator or Accent <code>&lt;mo&gt;</code></h3>
            <p id="tokenmo.p1">The <code>&lt;mo&gt;</code> element represents an
              operator or anything that should be rendered as an operator. In general,
              the notational conventions for mathematical operators are quite
              complicated, and therefore MathML provides a relatively sophisticated
              mechanism for specifying the rendering behavior of an
              <code>&lt;mo&gt;</code> element. As a consequence, in MathML the list of
              things that should "render as an operator" includes a number of notations
              that are not mathematical operators in the ordinary sense. Besides
              ordinary operators with infix, prefix, or postfix forms, these include
              fence characters such as braces, parentheses, and "absolute value" bars;
              separators such as comma and semicolon; and mathematical accents such as
              a bar or tilde over a symbol. We will use the term "operator" in this
              chapter to refer to operators in this broad sense.
            </p>
            <p>
              The <code>&lt;mo&gt;</code> element accepts the attributes described
              in section <a href="#global-attributes"></a> as well as the following
              attributes:
            </p>
            <ul id="mo-attributes">
              <li><a href="#form-attribute"><code>form</code></a></li>
              <li><a href="#fence-attribute"><code>fence</code></a></li>
              <li><a href="#separator-attribute"><code>separator</code></a></li>
              <li><a href="#lspace-attribute"><code>lspace</code></a></li>
              <li><a href="#rspace-attribute"><code>rspace</code></a></li>
              <li><a href="#stretchy-attribute"><code>stretchy</code></a></li>
              <li><a href="#symmetric-attribute"><code>symmetric</code></a></li>
              <li><a href="#maxsize-attribute"><code>maxsize</code></a></li>
              <li><a href="#minsize-attribute"><code>minsize</code></a></li>
              <li><a href="#largeop-attribute"><code>largeop</code></a></li>
              <li><a href="#movablelimits-attribute"><code>movablelimits</code></a></li>
              <li><a href="#accent-attribute"><code>accent</code></a></li>
            </ul>
            <p>
              Many properties of an <code>&lt;mo&gt;</code> element can be specified
              via attribute on that element. The default value of the <code>form</code>
              of an <code>mo</code> element is obtained as described in section
              “Default value of the form attribute” of
              [[MATHML3]]. From the
              <code>form</code> and the text content, we can deduce other
              default values from the operator dictionary or use the fallback values
              given in “Dictionary-based attributes” of
              [[MATHML3]].
            </p>
            <p>
              The leading space <code>lspace</code> and trailing space
              <code>rspace</code> must be added on each side of the
              <code>&lt;mo&gt;</code> element (or its outermost embellished ancestor).
            </p>
            <p>
              In most cases, the <code>&lt;mo&gt;</code> element is treated as an
              <code>&lt;mtext&gt;</code> element.
              However, when an <code>mo</code> element with a single character must be
              displayed as a large operator then instead we use the
              <code class="MATH">MathVariants</code>
              table to try and find a glyph of height at least
              <code class="MATH">DisplayOperatorMinHeight</code>
              (figure <a href="#F4"></a>). If none is found, we fallback to the
              largest one. Because this parameter does not always give
              the best size, user agents may also use the following heuristic: ensure
              that the large variant height is at least 2 times as large as the base
              height for integrals and √2 times as large as the base height for other
              operators.
            </p>
            <figure id="F4">
              <img src="figures/sumsize.svg"/>
              <figcaption>Base and displaystyle sizes of the summation symbol</figcaption>
            </figure>
            <p>
              When an <code>&lt;mo&gt;</code> element with a single character must be
              displayed as a horizontal or vertical operator then instead of displaying
              the normal character we use the <code class="MATH">MathVariants</code>
              table to try and find a glyph that has at least the desired size or an
              assembly from several glyphs to cover at least the desired size
              (figure <a href="#F5"></a>). The rules for vertical stretching
              are a bit more complicated and are described in section
              “Vertical Stretching Rules” of
              [[MATHML3]].
              If the operator has property <code>symmetric="true"</code>, it must be
              stretched symmetrically with respect to the math axis, which is given by
              the <code class="MATH">AxisHeight</code> value.
              Figure <a href="#F6"></a> compares the symmetric
              and non-symmetric stretching.
            </p>
            <p>
              The size variant or construction used for vertical stretchy operators
              will depend on the target size to cover. To determine the intrinsic
              width W of the operator, we consider the maximum of all possible widths
              for the base size, size variants and construction available for the given
              operator. It is assumed that the width of the
              operator is almost independent of the stretch size, which is the case in
              practice for most math fonts and operators.
            </p>
            <figure id="F5">
              <img src="figures/bracesize.svg"/>
              <figcaption>Base size, size variants and glyph assembly for the
                left brace</figcaption>
            </figure>
            <figure id="F6">
              <img src="figures/vstretch.svg"/>
              <figcaption>Symmetric and non-symmetric stretching of vertical
                operators</figcaption>
            </figure>
            <p>
              See section <a href="#mrow"></a> for details about how to treat
              “embellished ancestor”, and how decide when to display operators larger
              or when to stretch them vertically &amp; horizontally.
            </p>
          </section>

          <section id="tokenmtext">
            <h3>Text <code>&lt;mtext&gt;</code></h3>

            <p>
              The <code>&lt;mtext&gt;</code> element is used to represent arbitrary text
              that should be rendered as itself. In general, the
              <code>&lt;mtext&gt;</code> element is intended to denote commentary text.
            </p>
            <p>The <code>&lt;mn&gt;</code> element accepts the attributes described
              in section <a href="#global-attributes"></a>.</p>
            <p>
              In most cases the <code>&lt;mtext&gt;</code> element contains some text
              that is laid out without line breaks using complex text layout. It is assumed that we
              can measure the ink ascent &amp; descent, logical ascent &amp; descent and
              advance width of the text frame and use these values for the MathML box of
              the <code>&lt;mtext&gt;</code> element.
            </p>
            <p>
              If the trailing glyph of the text content has an entry in the
              <code class="MATH">MathItalicsCorrectionInfo</code> table then the specified
              value is used as the italic correction.
              User agents may subtract the advance width from the abscissa of the trailing
              ink edge as a heuristic value for the italic correction of the
              <code>&lt;mtext&gt;</code> element when it is not specified in the
              <code class="MATH">MathItalicsCorrectionInfo</code> table.
            </p>
            <p>
              If the text content is made of a single glyph and this glyph
              has an entry in the <code class="MATH">MathTopAccentAttachment</code> table
              then the specified value is used as the top accent attachment of the
              <code>&lt;mtext&gt;</code> element.
            </p>
            <p>
              If the CSS <code>direction</code> on the <code>&lt;mtext&gt;</code> element
              is set to right-to-left then user agents must enable the <code>rtlm</code>
              OpenType feature on text nodes unless it contradicts what the page author
              has specified with the <code>font-feature-settings</code> CSS property.
            </p>
            <p>
              If <code>&lt;mtext&gt;</code> is used at a non-zero scriptlevel then user
              agents must enable the <code class="MATH">ssty</code> OpenType feature on
              text nodes unless it contradicts what the page author has specified with
              the <code>font-feature-settings</code> CSS property.
              <a href="https://github.com/mathml-refresh/mathml/issues/19">https://github.com/mathml-refresh/mathml/issues/19</a>
            </p>
            <p>
              In the most general case, the <code>&lt;mtext&gt;</code> element may contain
              text with line breaks or arbitrary HTML5 phrasing elements. We assume that
              we can still determine logical dimensions and max-content width of the text
              content and use it for both the logical and ink values of the
              <code>&lt;mtext&gt;</code> element. The italic correction and
              top accent attachment are assigned the fallback values indicated in section
              <a href="#boxmodel"></a>.
            </p>
          </section>

          <section id="mspace">
            <h3>Space <code>&lt;mspace/&gt;</code></h3>
            <p>
              The <code>mspace</code> empty element represents a blank space of any
              desired size, as set by its attributes.
            </p>
            <p>
              The <code>&lt;mspace&gt;</code> element accepts the attributes described
              in section <a href="#global-attributes"></a> as well as the following
              attributes:
            </p>
            <ul id="mspace-attributes">
              <li><a href="#mspace-width-attribute"><code>width</code></a></li>
              <li><a href="#mspace-height-attribute"><code>height</code></a></li>
              <li><a href="#mspace-depth-attribute"><code>depth</code></a></li>
            </ul>
            <p>
              The <code>mspace</code> element is laid out as shown on figure
              <a href="#F7"></a>. The logical box is determined by the
              <code>height</code>, <code>depth</code> and <code>width</code> attributes
              defined in [[MATHML3]]. The
              ink box matches the logical box.
            </p>
            <figure id="F7">
              <img src="figures/mspacebox.svg"/>
              <figcaption>Box model for the <code>mspace</code> element</figcaption>
            </figure>
          </section>

          <section id="tokenms">
            <h3>String Literal <code>&lt;ms&gt;</code></h3>
            <p>
              The <code>&lt;ms&gt;</code> element is used to represent
              "string literals" in expressions meant to be interpreted by computer
              algebra systems or other systems containing "programming languages".
            </p>
            <p>
              The <code>&lt;mn&gt;</code> element accepts the attributes described
              in section <a href="#global-attributes"></a> as well as the following
              attributes:
            </p>
            <ul id="ms-attributes">
              <li><a href="#lquote-attribute"><code>lquote</code></a></li>
              <li><a href="#rquote-attribute"><code>rquote</code></a></li>
            </ul>
            <p>The layout algorithm is the same as the
              <a href="#tokenmtext"><code>&lt;mtext&gt;</code> element</a>. User Agents
              must CSS rules described in
              <a href="#user-agent-stylesheet">Appendix B</a>:
            </p>
            <div>
              <pre class="css">
                ms {
                  display: inline;
                }
                ms:before, ms:after {
                  content: "\0022"
                }
                ms[lquote]:before {
                  content: attr(lquote)
                }
                ms[rquote]:after {
                  content: attr(rquote)
                }
              </pre>
            </div>
          </section>
        </section>
        <section id="generallayout">
          <h2>General Layout Schemata</h2>

          <section id="mrow">
            <h3>Horizontally Group Sub-Expressions <code>&lt;mrow&gt;</code></h3>

            <div id="mrow.p1">
              <p>An <code>mrow</code> element is used to group together any number of sub-expressions, usually consisting of one or more <code>mo</code> elements acting as "operators" on one or more other expressions that are their "operands".</p>
            </div>
            <div id="mrow.p2">
              <p>The <code>dir</code> attribute must be mapped to the <code>direction</code> CSS property.
                The current version of this document does not define any linebreaking algorithm
                for the <code>mrow</code> element, user agents may just ignore linebreaking rules.</p>
            </div>
            <div id="mrow.p3">
              <p>User agents must follow the rules for inferred <code>mrow</code>s described in
                [[MATHML3]]. For example, to layout
                <code>&lt;msqrt&gt;child_1 child_2 child_3 ...&lt;/msqrt&gt;</code>, one must follow the layout
                rules described for <code>msqrt</code> in section <a href="#msqrt"></a> using
                the box of <code>&lt;mrow&gt;child_1 child_2 child_3 ... child_N&lt;/mrow&gt;</code> as the base.</p>
            </div>
            <div id="mrow.p4">
              <p>The <code>&lt;mrow&gt;child_1 child_2 child_3 ... child_N&lt;/mrow&gt;</code> element is laid
                out as show on figure <a href="#F8"></a>. The boxes of child<sub>1</sub>, child<sub>2</sub>, … child<sub>N</sub> are put in a horizontal row
                one after the other with all their baselines aligned. As a consequence of this
                and of child box models, graphical elements such as fraction bars
                or symmetric stretchy operators will also be
                aligned along the math axis when the
                <code class="MATH">AxisHeight</code> is unchanged (e.g. in the typical case
                where the math font is unchanged).</p>
            </div>
            <div id="mrow.p5">
              <p>As indicated in section <a href="A1.html"></a>, we generally do not add special spacing
                around the children. For example, the leading and trailing spacing is already
                included in the box metrics of embellished operators. The only exception is
                for the italic correction: when a “slanted” child is
                followed by a “straight” child, then an horizontal
                space corresponding to the italic correction of the “slanted” child is added
                between the two children [[OPEN-FONT-FORMAT]]. The italic correction of the
                last child is also added after that child when it is “slanted” and when
                the <code>mrow</code> has more than one child. In this document, we interpret
                “slanted” as a child that is not an operator with
                <code>largeop="true"</code> (or an embellished operator whose <code>mo</code> element core
                has <code>largeop="true"</code>) and has nonzero italic correction and “straight”
                as “non-slanted”.</p>
            </div>
            <div id="mrow.p6">
              <p>When the <code>mrow</code> element contains only one child then the previous
                description implies that the box metrics of the <code>mrow</code> is the same as
                the one of its unique child. As indicated in section <a href="#boxmodel"></a>, we thus
                use the italic correction and top accent attachment of the child as the
                corresponding values of the <code>mrow</code> box.</p>
            </div>
            <figure id="F8">
              <img src="figures/mrowbox.svg"/>
              <figcaption>Box model for the <code>mrow</code> element</figcaption>
            </figure>
          </section>
          <section id="mfrac">
            <h3>Fractions <code>&lt;mfrac&gt;</code>
            </h3>


            <div id="mfrac.p1">
              <p>The <code>mfrac</code> element is used for fractions. It can also be used to mark up fraction-like objects such as binomial coefficients and Legendre symbols. The syntax for <code>mfrac</code> is
                <br/>
                <code>&lt;mfrac&gt; numerator denominator &lt;/mfrac&gt;</code>
              </p>
            </div>
            <div id="mfrac.p2">
              <p>The <code>displaystyle</code> and <code>scriptlevel</code> changes be achieved with the
                following style in the user agent stylesheet as suggested in
                <a href="#user-agent-stylesheet">Appendix B</a>:</p>
              <div>
<pre class="css">mfrac > * {
  mathml-script-level: auto;
  mathml-math-style: inline;
}</pre>
              </div>
            </div>
            <div id="mfrac.p3">
              <p>The axis of the <code>mfrac</code> element is always given by
                <code class="MATH">AxisHeight</code>.</p>
            </div>
            <div id="mfrac.p4">
              <p>The default line thickness is given by
                <code class="MATH">FractionRuleThickness</code>
                Use the <code>linethickness</code> attribute [[MATHML3]] to determine the
                actual thickness of the fraction bar. A percent or unitless length is
                interpreted as a multiple of the default rule thickness.
                The color and visibility of the fraction bar must honor the values given by the
                <code>color</code> and <code>visibility</code> CSS properties on the <code>mfrac</code> element.</p>
            </div>
            <div id="mfrac.p5">
              <p>If the actual line thickness is nonzero, the <code>mfrac</code> element is laid out as
                shown on figure <a href="#F9"></a>.
                The width is given by the maximum width of the
                numerator and denominator and the numerator and denominator are horizontally
                centered. A fraction bar with the actual thickness is drawn centered on the
                axis height. The numerator and denominator are shifted
                up and down using the values <code class="MATH">FractionNumeratorShiftUp</code>,
                <code class="MATH">FractionDenominatorShiftDown</code> in inline style and
                <code class="MATH">FractionNumeratorDisplayStyleShiftUp</code>,
                <code class="MATH">FractionDenominatorDisplayStyleShiftDown</code>
                in display style.
                If necessary, these shift values are increased to ensure that the gaps between
                the numerator/denominator and fraction bar satisfy the minimal values provided
                by <code class="MATH">FractionDenominatorGapMin</code> and
                <code class="MATH">FractionNumeratorGapMin</code> in inline style and
                <code class="MATH">FractionDenominatorDisplayStyleGapMin</code> and
                <code class="MATH">FractionNumeratorDisplayStyleGapMin</code>
                in display style.</p>
            </div>
            <figure id="F9">
              <img src="figures/mfracbox.svg"/>
              <figcaption>Box model for the <code>mfrac</code> element</figcaption>
            </figure>
            <div id="mfrac.p6">
              <p>If the actual line thickness is zero,
                the <code>mfrac</code> element is instead laid out as
                shown on figure <a href="#F10"></a>.
                The gap between the top and bottom boxes
                is equally split around the axis height. The relevant shift values are now
                <code class="MATH">StackTopShiftUp</code>,
                <code class="MATH">StackBottomShiftDown</code> in inline style and
                <code class="MATH">StackTopDisplayStyleShiftUp</code>,
                <code class="MATH">StackBottomDisplayStyleShiftDown</code> in display style.
                If necessary, the two shift values are increased by a same value to ensure
                the gap between the top and bottom boxes satisfy the values provided by
                by <code class="MATH">StackGapMin</code> in inline style and
                <code class="MATH">StackDisplayStyleGapMin</code> in display style.</p>
            </div>
            <figure id="F10">
              <img src="figures/mfracnobarbox.svg"/>
              <figcaption>Box model for the <code>mfrac</code> element without bar</figcaption>
            </figure>
            <div id="mfrac.p7">
              <p>In order to prevent the fraction bar to be confused with other items around
                the fraction (e.g. minus sign or the bar of another fraction), a 1 pixel space
                must actually be added on each side of the <code>mfrac</code> element.</p>
            </div>
            <div id="mfrac.p8">
              <p>If the numerator is an embellished operator and the <code>mfrac</code> element is the
                outermost element in this embellished operator hierarchy then the operator
                leading and trailing spaces must be added around the fraction.</p>
            </div>
          </section>
          <section id="msqrt">
            <h3>Radicals <code>&lt;msqrt&gt;</code>, <code>&lt;mroot&gt;</code>
            </h3>


            <div id="msqrt.p1">
              <p>The MathML specification describes radicals as follows [[MATHML3]]:</p>

              <p>These elements construct radicals. The <code>msqrt</code> element is used for square
                roots, while the <code>mroot</code> element is used to draw radicals with indices,
                e.g. a cube root. The syntax for these elements is:</p>
<pre>
  &lt;msqrt&gt; base &lt;/msqrt&gt;
  &lt;mroot&gt; base index &lt;/mroot&gt;
</pre>
            </div>
            <div id="msqrt.p2">
              <p>The <code>displaystyle</code> and <code>scriptlevel</code> changes be achieved with the
                following style in the user agent stylesheet as suggested in
                <a href="#user-agent-stylesheet">Appendix B</a>:</p>
              <div>
<pre class="css">mroot > :not(:first-child) {
  mathml-script-level: increment 2;
  mathml-math-style: inline;
}</pre>
              </div>
            </div>
            <div id="msqrt.p3">
              <p>The line thickness of the overbar is given by
                <code class="MATH">RadicalRuleThickness</code>.
                The gap between the overbar and base is given by
                <code class="MATH">RadicalVerticalGap</code>
                in inline style and <code class="MATH">RadicalDisplayStyleVerticalGap</code>
                in display style.
                The ascent above the overbase is given by <code class="MATH">RadicalExtraAscender</code>.
                The surd is drawn by trying to vertically stretch the character
                U+221A SQUARE ROOT
                to at least the sum of the ink height of the base, the radical gap and the
                radical rule thickness. If the CSS <code>direction</code> is set to right-to-left,
                then the surd is actually drawn from the glyph obtained by mirroring
                U+221A SQUARE ROOT via the <code>rtlm</code> OpenType feature.
                The color and visibility of the surd and overbar must honor the values given by
                the <code>color</code> and <code>visibility</code> CSS properties on the <code>msqrt</code> element.</p>
            </div>
            <div id="msqrt.p4">
              <p>The <code>msqrt</code> element is laid out as shown on figure
                <a href="#F11"></a>.
                The width is given by the sum of the width of the surd and of the base.
                The baseline of the square root matches the baseline of the base.
                The ink box is determined from the ink boxes of the surd and base while the
                logical box takes into account the extra ascender</p>
            </div>
            <figure id="F11">
              <img src="figures/msqrtbox.svg"/>
              <figcaption>Box model for the <code>msqrt</code> element</figcaption>
            </figure>
            <div id="msqrt.p5">
              <p>The <code>mroot</code> element is laid out as shown on figure <a href="#F12"></a>.
                We start by ignoring the root index and we layout the base and surd as
                shown on figure <a href="#F11"></a> to obtain a box B.
                The horizontal metrics of the <code>mroot</code> element are obtained by putting
                <code class="MATH">RadicalKernBeforeDegree</code>
                before the root index, then placing the root index, then a kerning
                of <code class="MATH">RadicalKernAfterDegree</code>
                after the root index and finally placing B. In general
                the kerning before the root index is positive while the kerning after it is
                negative,
                which means that the root element will have some space before it and that the
                root index will overlap the surd.
                For the vertical metrics of the <code>mroot</code> element, we first take the baseline
                of B as the baseline. We graduate the ink height of B with a linear
                scale going from the bottom at coordinate 0 to the top at coordinate 1.
                Then the ink bottom of the root index will
                be vertically positioned at coordinate
                <code class="MATH">RadicalDegreeBottomRaisePercent</code>.
                Finally, we take into consideration the box of the root index and B to deduce
                the metrics for the whole box of the <code>mroot</code> element.</p>
            </div>
            <figure id="F12">
              <img src="figures/mrootbox.svg"/>
              <figcaption>Box model for the <code>mroot</code> element</figcaption>
            </figure>
          </section>

          <section id="mstyle">
            <h3>Style Change <code>&lt;mstyle&gt;</code></h3>
            <p id="mstyle.p1">
              Historically, the <code>&lt;mstyle&gt;</code> element was introduced to make
              style changes that affect the rendering of its contents.
            </p>
            <p id="mstyle.p2">
              The <code>&lt;mstyle&gt;</code> element accepts the attributes described in
              section <a href="#global-attributes"></a>. Its layout algorithm is the
              same as the <code>&lt;mrow&gt;</code> element.
            </p>
            <div class="note">
              Although <code>mstyle</code> is not really useful in modern web
              environments, it is preserved for backward compatibility reasons.
            </div>
          </section>

          <section id="merror">
            <h3>Error Message <code>&lt;merror&gt;</code></h3>
            <p id="merror.p1">
              The <code>&lt;merror&gt;</code> element displays its contents as an
              ”error message”. The intent of this element is to provide a standard way
              for programs that generate MathML from other input to report syntax errors
              in their input.
            </p>
            <p id="merror.p2">
              The <code>&lt;merror&gt;</code> element accepts the attributes described in
              section <a href="#global-attributes"></a>. Its layout algorithm is the
              same as the <code>&lt;mrow&gt;</code> element.
              The User Agent stylesheet must contain the following properties from
              <a href="#user-agent-stylesheet">Appendix B</a> in order to visually
              highlight the error message:
            </p>
            <div id="merror.p3">
<pre class="css">merror {
  outline: solid thin red;
  background-color: lightYellow;
}</pre>
            </div>
          </section>

          <section id="mpadded">
            <h3>Adjust Space Around Content <code>&lt;mpadded&gt;</code>
            </h3>

            <div id="mpadded.p1">
              <p>An <code>mpadded</code> element renders the same as its child content, but with the
                size of the child’s bounding box and the relative positioning point of its
                content modified according to <code>mpadded</code>’s attributes.</p>
            </div>
            <div id="mpadded.p2">
              <p>See [[MATHML3]] for how the metrics of <code>mpadded</code> element are determined.
                Note that pseudo-units allows horizontal metrics to depend on vertical metrics,
                for example <code>width="2height"</code> which can be problematic to determine
                intrinsic widths. Hence in the present document, if
                the value of the <code>width</code> and <code>lspace</code> attributes contains
                ”height” or ”depth” pseudo-units, then they must be ignored.</p>
            </div>
            <div id="mpadded.p3">
              <p>The <code>mpadded</code> element is laid out as shown on figure
                <a href="#F13"></a>.
                The height, depth and width of the content in [[MATHML3]] corresponds to
                the logical box of the content. The content of the <code>mpadded</code> element is
                positioned from the origin of the <code>mpadded</code> element as follows: We shift
                the content
                forward by a distance of <code>lspace</code> and shift it upward by a distance of
                <code>voffset</code>. The logical metrics of the <code>mpadded</code> element are given by the
                height, depth and width of the <code>mpadded</code> element described in
                [[MATHML3]]. The ink metrics of the <code>mpadded</code> element match their logical
                metrics.
              </p>
            </div>
            <figure id="F13">
              <img src="figures/mpaddedbox.svg"/>
              <figcaption>Box model for the <code>mpadded</code> element</figcaption>
            </figure>
          </section>

          <section id="mphantom">
            <h3>Making Sub-Expressions Invisible <code>&lt;mphantom&gt;</code></h3>
            <p id="mphantom.p1">
              Historically, the <code>mphantom</code> element was introduced to render
              its content invisibly, but with the same size and other dimensions,
              including baseline position, that its contents would have if they were
              rendered normally.
            </p>
            <p id="mphantom.p2">
              The <code>&lt;mphantom&gt;</code> element accepts the attributes described
              in section <a href="#global-attributes"></a>. Its layout algorithm is
              the same as the <code>&lt;mrow&gt;</code> element.
              The User Agent stylesheet must contain the following properties from
              <a href="#user-agent-stylesheet">Appendix B</a> in order to hide its
              content:
            </p>
            <div id="mphantom.p3">
<pre class="css">mphantom {
  visibility: hidden;
}</pre>
            </div>
            <div class="note">
              Although <code>mphantom</code> is not really useful in modern web
              environments, it is preserved for backward compatibility reasons.
            </div>
          </section>

          <section id="menclose">
            <h3>Enclose Expression Inside Notation <code>&lt;menclose&gt;</code>
            </h3>


            <div id="menclose.p1">
              <p>The <code>menclose</code> element renders its content inside the enclosing notation specified by its notation attribute.</p>
            </div>
            <div id="menclose.p2">
              <p>The color and visibility of the <code>menclose</code> notations must honor the values
                given by the <code>color</code> and <code>visibility</code> CSS properties on the
                <code>menclose</code> element.</p>
            </div>
            <div id="menclose.p3">
              <p>Based on [[OPEN-FONT-FORMAT]] [[TEXBOOK]], we use the notation ξ<sub>8</sub>
                from the TeXBook to denote the default rule thickness and use
                3ξ<sub>8</sub> for gaps.
                We actually let ξ<sub>8</sub> be <code class="MATH">OverbarRuleThickness</code>.
                Note that contrary to what is done in general and unless specified otherwise,
                the x-axis direction of notations is assumed to be independent of the CSS
                <code>direction</code>.
                In order to determine the metrics of the <code>menclose</code> notation, we
                compute each notation individually and take the union of the metrics:</p>
            </div>
            <div id="menclose.p4">
              <ol id="I7">
                <li id="I7.i1">
                  <div id="I7.i1.p1">
                    <p>The <code>left</code> notation is drawn by putting a vertical bar of thickness
                      ξ<sub>8</sub> on the left of the content of the <code>menclose</code> element.
                      The length of the bar is obtained by extending the height of the content
                      with <code class="MATH">OverbarVerticalGap</code> plus
                      <code class="MATH">OverbarRuleThickness</code> above
                      and <code class="MATH">UnderbarVerticalGap</code> plus
                      <code class="MATH">UnderbarRuleThickness</code> below.
                      The gap between the bar and the content is 3ξ<sub>8</sub>.
                      The logical box is obtained by adding some space of width
                      ξ<sub>8</sub> on the left of the bar. See figure <a href="#F14"></a>.</p>
                  </div>
                  <figure id="F14">
                    <img src="figures/mpaddedbox.svg"/>
                    <figcaption>Box model for the <code>left</code>
                      notation of the <code>menclose</code> element</figcaption>
                  </figure>
                </li>
                <li id="I7.i2">
                  <div id="I7.i2.p1">
                    <p>The <code>right</code> notation is drawn the same as the <code>left</code> notation,
                      but with the vertical bar placed on the right.
                    </p>
                  </div>
                </li>
                <li id="I7.i3">
                  <div id="I7.i3.p1">
                    <p>The <code>top</code> notation is drawn by putting an overbar of thickness
                      <code class="MATH">OverbarRuleThickness</code>
                      over the content of the <code>menclose</code> element.
                      The length of the bar is obtained by extending the width of the content
                      with 4ξ<sub>8</sub> on each side.
                      The gap between the overbar and the content is
                      <code class="MATH">OverbarVerticalGap</code>.
                      The logical box is obtained by adding some space of height
                      <code class="MATH">OverbarExtraAscender</code> above the bar.
                      See figure <a href="#F15"></a>.</p>
                  </div>
                  <figure id="F15">
                    <img src="figures/topbox.svg"/>
                    <figcaption>Box model for the <code>top</code>
                      notation of the <code>menclose</code> element</figcaption>
                  </figure>
                </li>
                <li id="I7.i4">
                  <div id="I7.i4.p1">
                    <p>The <code>bottom</code> notation is drawn the same as the <code>top</code> notation,
                      but with the vertical bar placed below the content and using parameters
                      <code class="MATH">UnderbarRuleThickness</code>,
                      <code class="MATH">UnderbarVerticalGap</code>.
                      and <code class="MATH">UnderExtraDescender</code>.</p>
                  </div>
                </li>
                <li id="I7.i5">
                  <div id="I7.i5.p1">
                    <p>The <code>box</code> notation is treated as equivalent to
                      <code>left right top bottom</code>.</p>
                  </div>
                </li>
                <li id="I7.i6">
                  <div id="I7.i6.p1">
                    <p>To draw the <code>roundedbox</code> notation, we consider the box
                      obtained by expanding the ink box by 7ξ<sub>8</sub> / 2 on each side.
                      Using SVG terminology, we draw a rounded rectangle on this expanded box
                      with parameters <code>rx</code>, <code>ry</code> and <code>stroke-width</code> set to 3ξ<sub>8</sub>
                      <cite><a href="references.html#svg"></a></cite>. To obtain the logical box we again add a space of ξ<sub>8</sub> on
                      each side of the ink box. See figure <a href="#F16"></a>.</p>
                  </div>
                  <figure id="F16">
                    <img src="figures/roundedbox.svg"/>
                    <figcaption>Box model for the <code>roundedbox</code>
                      notation of the <code>menclose</code> element</figcaption>
                  </figure>
                </li>
                <li id="I7.i7">
                  <div id="I7.i7.p1">
                    <p>The <code>actuarial</code> notation is treated as equivalent to <code>right top</code>.</p>
                  </div>
                </li>
                <li id="I7.i8">
                  <div id="I7.i8.p1">
                    <p>The <code>madruwb</code> notation is treated as equivalent to
                      <code>right bottom</code>.</p>
                  </div>
                </li>
                <li id="I7.i9">
                  <div id="I7.i9.p1">
                    <p>The <code>horizontalstrike</code> notation is drawn with an horizontal bar
                      of thickness ξ<sub>8</sub> and
                      vertically centered inside the <code>menclose</code> content.
                      This does not change the box metrics.
                      See figure <a href="#F17"></a>.</p>
                  </div>
                  <figure id="F17">
                    <img src="figures/horizstrikebox.svg"/>
                    <figcaption>Box model for the <code>horizontalstrike</code>
                      notation of the <code>menclose</code> element</figcaption>
                  </figure>
                </li>
                <li id="I7.i10">
                  <div id="I7.i10.p1">
                    <p>The <code>verticalstrike</code> notation is drawn the same as
                      <code>horizontalstrike</code> but with a vertical bar
                      of thickness ξ<sub>8</sub> and horizontally centered inside the <code>menclose</code>
                      content.</p>
                  </div>
                </li>
                <li id="I7.i11">
                  <div id="I7.i11.p1">
                    <p>The <code>updiagonalstrike</code> notation is drawn with a line
                      of thickness ξ<sub>8</sub> going from the bottom left corner of the <code>menclose</code>
                      content to its top right corner. Using SVG terminology, the
                      <code>stroke-linecap</code> of the line is <code>butt</code> <cite><a href="references.html#svg"></a></cite>.
                      As an approximation, the ink box
                      is set equal to the logical box and obtained by increasing the original box
                      from each side by ξ<sub>8</sub> / 2.
                      See figure <a href="#F18"></a>.</p>
                  </div>
                  <figure id="F18">
                    <img src="figures/updiagstrikebox.svg"/>
                    <figcaption>Box model for the <code>updiagonalstrike</code>
                      notation of the <code>menclose</code> element</figcaption>
                  </figure>
                </li>
                <li id="I7.i12">
                  <div id="I7.i12.p1">
                    <p>The <code>downdiagonalstrike</code> notation is drawn as an
                      <code>updiagonalstrike</code>
                      but the line strike goes from the top left corner to the bottom right corner.
                      Using SVG terminology, the
                      <code>stroke-linecap</code> of the line is <code>butt</code> <cite><a href="references.html#svg"></a></cite>.</p>
                  </div>
                </li>
                <li id="I7.i13">
                  <div id="I7.i13.p1">
                    <p>The <code>longdiv</code> notation is drawn similarly to the <code>msqrt</code> element
                      (figure <a href="#F11"></a>). It is independent of CSS
                      <code>direction</code> and U+221A SQUARE ROOT is replaced with
                      U+0029 RIGHT PARENTHESIS. The rule thickness is ξ<sub>8</sub>,
                      the gap between content and overbar is 3ξ<sub>8</sub> and the extra ascender
                      is ξ<sub>8</sub>.</p>
                  </div>
                </li>
                <li id="I7.i14">
                  <div id="I7.i14.p1">
                    <p>To draw the <code>circle</code> notation, we first consider the ink box of
                      width w and height h. We draw the ellipse
                      of axes the axes of symmetry of this ink box, of radii
                      w * √2 / 2
                      and
                      h * √2 / 2
                      and of thickness ξ<sub>8</sub>.
                      We ensure that the logical box also has space ξ<sub>8</sub> around each side
                      of the ellipse ink box.</p>
                  </div>
                  <figure id="F19">
                    <img src="figures/circlebox.svg"/>
                    <figcaption>Box model for the <code>circle</code>
                      notation of the <code>menclose</code> element</figcaption>
                  </figure>
                </li>
                <li id="I7.i15">
                  <div id="I7.i15.p1">
                    <p>This document does define any layout algorithm for other <code>menclose</code>
                      notations. User agents may ignore them.</p>
                  </div>
                </li>
              </ol>
            </div>
          </section>
        </section>
        <section id="scriptsandlimits">
          <h2>Script and Limit Schemata</h2>

          <section id="msubmsup">
            <h3>Subscripts and Superscripts <code>&lt;msub&gt;</code>, <code>&lt;msup&gt;</code>,
              <code>&lt;msubsup&gt;</code>
            </h3>


            <div id="msubmsup.p1">
              <p>The msub element attaches a subscript to a base using the syntax
                <br/>
                <code>&lt;msub&gt;</code> base subscript <code>&lt;/msub&gt;</code>
              </p>
              <p>The <code>msup</code> element attaches a superscript to a base using the syntax
                <br/>
                <code>&lt;msup&gt;</code> base superscript <code>&lt;/msup&gt;</code>
              </p>
              <p>The <code>msubsup</code> element is used to attach both a subscript and superscript to
                a base expression.
                <br/>
                <code>&lt;msubsup&gt;</code> base subscript superscript <code>&lt;/msubsup&gt;</code>
              </p>
            </div>
            <div id="msubmsup.p2">
              <p>As suggested in
                <a href="#user-agent-stylesheet">Appendix B</a>,
                the <code>displaystyle</code> and
                <code>scriptlevel</code> changes be achieved with the
                following style in the user agent stylesheet:</p>
              <div>
<pre class="css">msub > :not(:first-child),
  msup > :not(:first-child),
  msubsup > :not(:first-child) {
  mathml-script-level: increment 1;
  mathml-math-style: inline;
}</pre>
              </div>
            </div>
            <div id="msubmsup.p3">
              <p>The <code>msub</code> element is laid out as shown on figure <a href="#F20"></a>.
                The baseline is the baseline of the base while the baseline of the script is
                shifted down by <code>SubShift</code>, which is the minimal value honoring the
                following conditions:</p>
              <ol id="I8">
                <li id="I8.i1">
                  <div id="I8.i1.p1">
                    <p><code>SubShift</code> is at least <code class="MATH">SubscriptShiftDown</code>.</p>
                  </div>
                </li>
                <li id="I8.i2">
                  <div id="I8.i2.p1">
                    <p>The top of the subscript <code>SubTop</code> with respect to the baseline
                      is not above <code class="MATH">SubscriptTopMax</code>.</p>
                  </div>
                </li>
                <li id="I8.i3">
                  <div id="I8.i3.p1">
                    <p>The drop <code>SubscriptBaselineDrop</code> from the bottom of the base to
                      the baseline of the script is at least
                      <code class="MATH">SubscriptBaselineDropMin</code>.</p>
                  </div>
                </li>
              </ol>
            </div>
            <div id="msubmsup.p4">
              <p>When determining
                the logical box, a space of width <code class="MATH">SpaceAfterScript</code>
                is added after
                the subscript. By default, the leading edge of the subscript is aligned with
                the trailing edge of the base. However, if the base is an operator with
                <code>largeop="true"</code> (or an embellished operator whose <code>mo</code> element core
                has <code>largeop="true"</code>) the subscript is horizontally shifted backward
                by the italic correction of the base.</p>
            </div>
            <figure id="F20">
              <img src="figures/msubbox.svg"/>
              <figcaption>Box model for the <code>msub</code> element</figcaption>
            </figure>
            <div id="msubmsup.p5">
              <p>The <code>msup</code> element is laid out as shown on figure <a href="#F21"></a>.
                The baseline is the baseline of the base while the baseline of the script is
                shifted up by <code>SuperShift</code>, which is the minimal value honoring the
                following conditions:</p>
              <ol id="I9">
                <li id="I9.i1">
                  <div id="I9.i1.p1">
                    <p><code>SuperShift</code> is at least
                      <code class="MATH">SuperscriptShiftUpCramped</code> if the <code>msup</code> element is
                      cramped (section <a href="A1.html"></a>) or at least
                      <code class="MATH">SuperscriptShiftUp</code> otherwise.</p>
                  </div>
                </li>
                <li id="I9.i2">
                  <div id="I9.i2.p1">
                    <p>The bottom of the superscript <code>SuperBottom</code> with respect to the
                      baseline is not below <code class="MATH">SuperscriptBottomMin</code>.</p>
                  </div>
                </li>
                <li id="I9.i3">
                  <div id="I9.i3.p1">
                    <p>The drop <code class="MATH">SuperscriptBaselineDrop</code> from the top of the base to
                      the baseline of the script is at most <code class="MATH">SuperscriptBaselineDropMax</code>.</p>
                  </div>
                </li>
              </ol>
            </div>
            <div id="msubmsup.p6">
              <p>When determining
                the logical box, a space of width <code class="MATH">SpaceAfterScript</code>
                is added after
                the superscript. By default, the leading edge of the superscript is aligned with
                the trailing edge of the base and shifted forward by the italic correction
                of the base, except if the base is an operator with
                <code>largeop="true"</code> (or an embellished operator whose <code>mo</code> element core
                has <code>largeop="true"</code>).</p>
            </div>
            <figure id="F21">
              <img src="figures/msupbox.svg"/>
              <figcaption>Box model for the <code>msup</code> element</figcaption>
            </figure>
            <div id="msubmsup.p7">
              <p>The <code>msubsup</code> element is laid out as shown on figure
                <a href="#F22"></a>.
                The baseline is the baseline of the base while the baseline of the script is
                shifted down by <code>SubShift</code> and the superscript is shifted up by
                <code>SuperShift</code> which is initially set to the minimal values honoring the
                following conditions:</p>
              <ol id="I10">
                <li id="I10.i1">
                  <div id="I10.i1.p1">
                    <p><code>SubShift</code> is at least
                      <code class="MATH">SuperscriptShiftUpCramped</code> if the <code>msup</code> element is
                      cramped (section <a href="A1.html"></a>) or at least
                      <code class="MATH">SuperscriptShiftUp</code> otherwise.</p>
                  </div>
                </li>
                <li id="I10.i2">
                  <div id="I10.i2.p1">
                    <p>The top of the subscript <code>SubTop</code> with respect to the baseline
                      is not above <code class="MATH">SubscriptTopMax</code>.</p>
                  </div>
                </li>
                <li id="I10.i3">
                  <div id="I10.i3.p1">
                    <p>The drop <code class="MATH">SuperscriptBaselineDrop</code> from the top of the base to
                      the baseline of the superscript is at most <code class="MATH">SuperscriptBaselineDropMax</code>.</p>
                  </div>
                </li>
                <li id="I10.i4">
                  <div id="I10.i4.p1">
                    <p><code>SubShift</code> is at least
                      <code class="MATH">SuperscriptShiftUpCramped</code> if the <code>msup</code> element is
                      cramped (section <a href="A1.html"></a>) or at least
                      <code class="MATH">SuperscriptShiftUp</code> otherwise.</p>
                  </div>
                </li>
                <li id="I10.i5">
                  <div id="I10.i5.p1">
                    <p>The bottom of the superscript <code>SuperBottom</code> with respect to the
                      baseline is not below <code class="MATH">SuperscriptBottomMin</code>.</p>
                  </div>
                </li>
                <li id="I10.i6">
                  <div id="I10.i6.p1">
                    <p>The drop <code class="MATH">SubscriptBaselineDrop</code> from
                      the bottom of the base to the the baseline of the subscript is at least
                      <code class="MATH">SubscriptBaselineDropMin</code>.
                    </p>
                  </div>
                </li>
              </ol>
            </div>
            <div id="msubmsup.p8">
              <p>We then increase the gap <code>SubSuperGap</code> between the bottom of the superscript
                and the top of the subscript to ensure it is at least
                <code class="MATH">SubSuperscriptGapMin</code>:
                This is first done by continuing to shift the superscript up as long as the
                <code>SuperBottom</code> does not exceed
                <code class="MATH">SuperscriptBottomMaxWithSubscript</code>
                and next by continuing to shift the subscript down.</p>
            </div>
            <div id="msubmsup.p9">
              <p>When determining
                the logical box, a space of width <code class="MATH">SpaceAfterScript</code>
                is added after
                each script. By default the leading edges of the scripts are aligned with
                the trailing edge and either the superscript is shifted forward by the italic
                correction of the base. However, if the base is an operator with
                <code>largeop="true"</code> (or an embellished operator whose <code>mo</code> element core
                has <code>largeop="true"</code>) then instead the subscript is shifted forward by the
                italic correction of the base.</p>
            </div>
            <figure id="F22">
              <img src="figures/msubsupbox.svg"/>
              <figcaption>Box model for the <code>msubsup</code> element</figcaption>
            </figure>
          </section>
          <section id="mundermover">
            <h3>Underscripts and Overscripts <code>&lt;munder&gt;</code>, <code>&lt;mover&gt;</code>,
              <code>&lt;munderover&gt;</code>
            </h3>


            <div id="mundermover.p1">
              <p>The <code>munder</code> element attaches an accent or limit placed under a base using
                the syntax
                <br/>
                <code>&lt;munder&gt;</code> base underscript <code>&lt;/munder&gt;</code>
                <br/>
                If base is an operator with <code>movablelimits="true"</code> (or an embellished
                operator whose <code>mo</code> element core has <code>movablelimits="true"</code>), and
                <code>displaystyle="false"</code>, then underscript is drawn in a subscript position.
                In this case, the <code>accentunder</code> attribute is ignored. […]
              </p>
              <p>
                The <code>mover</code> element attaches an accent or limit placed over a base using
                the syntax
                <br/>
                <code>&lt;mover&gt; base overscript &lt;/mover&gt;</code>
                <br/>
                If base is an operator with <code>movablelimits="true"</code> (or an embellished
                operator whose <code>mo</code> element core has <code>movablelimits="true"</code>), and
                <code>displaystyle="false"</code>, then overscript is drawn in a superscript position.
                In this case, the <code>accent</code> attribute is ignored.</p>
              <p>
                The <code>munderover</code> element attaches accents or limits placed both over and
                under a base using the syntax
                <br/>
                <code>&lt;munderover&gt; base underscript overscript &lt;/munderover&gt;</code>
                <br/>
                If base is an operator with <code>movablelimits="true"</code> (or an embellished
                operator whose <code>mo</code> element core has <code>movablelimits="true"</code>), and
                <code>displaystyle="false"</code>, then underscript and overscript are drawn in a
                subscript and superscript position, respectively. In this case, the
                <code>accentunder</code> and <code>accent</code> attributes are ignored.</p>
            </div>
            <div id="mundermover.p2">
              <p>User Agents must perform the <code>scriptlevel</code> increment by checking
                the appropriate <code>accent</code> or <code>accentunder</code> value, which can not be done
                using only CSS. However, <code>displaystyle</code> changes can be achieved with the
                following style in the user agent stylesheet, as suggested in
                <a href="#user-agent-stylesheet">Appendix B</a>:</p>
              <div>
<pre class="css">munder > :not(:first-child),
  mover > :not(:first-child),
  munderover > :not(:first-child) {
  mathml-math-style: inline;
  }
</pre>
              </div>
            </div>
            <div id="mundermover.p3">
              <p>In cases where underscript and overscript are drawn as subscript and
                superscript position then the layout algorithm is the same as section
                <a href="#msubmsup"></a>. Note that in that case,
                <code>accent</code> or <code>accentunder</code> are ignored so the scriptlevel increment is
                always performed.</p>
            </div>
            <div id="mundermover.p4">
              <p>The general layout of <code>munderover</code> is shown on figure
                <a href="#F23"></a>.
                The overscript is placed above the base, the underscript below the base
                and by default are aligned with respect to their geometrical center.
                If the overscript is an accent and has a <code class="MATH">TopAccentAttachment</code>
                value, then this value may be used to horizontally align the accent instead
                of its geometrical center.
                <code>OverShift</code> is the distance between the top ink
                of the base and the baseline of the overscript, <code>OverGap</code> is the distance
                between the top ink of the base and the bottom ink of the overscript,
                <code class="MATH">OverExtraAscender</code> is extra space to add above the overscript when
                determining the logical box. <code>UnderShift</code>, <code>UnderGap</code> and
                <code class="MATH">UnderExtraDescender</code> are defined similarly for the underscripts.
                We distinguish three cases:</p>
            </div>
            <div id="mundermover.p5">
              <ol id="I11">
                <li id="I11.i1">
                  <div id="I11.i1.p1">
                    <p>If the base is an operator with <code>largeop="true"</code>
                      (or an embellished operator whose <code>mo</code> element core has
                      <code>largeop="true"</code>) then ensure that <code>OverGap</code> is at least
                      <code class="MATH">UpperLimitGapMin</code>, that <code>OverShift</code> is at least
                      <code class="MATH">UpperLimitBaselineRiseMin</code> that <code>UnderGap</code> is at
                      least
                      <code class="MATH">LowerLimitGapMin</code>, that <code>UnderShift</code> is at least
                      <code class="MATH">LowerLimitBaselineDropMin</code>.
                      <code class="MATH">OverExtraAscender</code> and
                      <code class="MATH">UnderExtraDescender</code> are zero. The
                      underscript is shifted backward by half the italic correction of the base.
                      The overscript is shifted forward by half the italic correction of the base.</p>
                  </div>
                </li>
                <li id="I11.i2">
                  <div id="I11.i2.p1">
                    <p>If the base is a horizontal operator with <code>stretchy="true"</code>
                      (or a horizontal embellished operator whose <code>mo</code> element core has
                      <code>stretchy="true"</code>). Then ensure that <code>OverGap</code> is at least
                      <code class="MATH">StretchStackGapBelowMin</code>, that <code>OverShift</code> is at
                      least
                      <code class="MATH">StretchStackTopShiftUp</code> that <code>UnderGap</code> is at least
                      <code class="MATH">StretchStackGapAboveMin</code>,
                      that <code>UnderShift</code> is at least
                      <code class="MATH">StretchStackBottomShiftDown</code>.
                      <code class="MATH">OverExtraAscender</code> and
                      <code class="MATH">UnderExtraDescender</code> are zero.</p>
                  </div>
                </li>
                <li id="I11.i3">
                  <div id="I11.i3.p1">
                    <p>In other cases we proceed as follows.
                      There are not any specific conditions to satisfy on <code>OverShift</code> or
                      <code>UnderShift</code>.
                      <code>OverExtraAscender</code> and
                      <code>OverExtraAscender</code> are respectively set to
                      <code class="MATH">OverbarExtraAscender</code>
                      and <code class="MATH">UnderExtraDescender</code>.
                      We set <code>UnderGap</code> to <code class="MATH">UnderbarVerticalGap</code>
                      if the underscript is not an accent and to zero otherwise.
                      We set <code>OverGap</code> to <code class="MATH">OverbarVerticalGap</code>
                      if the overscript is not an accent and generally to zero otherwise.
                      However, if overscript is an accent and if the base ascent is at most
                      <code class="MATH">AccentBaseHeight</code> then we actually set <code>OverGap</code> to
                      their nonnegative difference.</p>
                  </div>
                </li>
              </ol>
            </div>
            <div id="mundermover.p6">
              <p>Remark: For accent overscripts and bases with ascents that are at most
                <code class="MATH">AccentBaseHeight</code>, the rule from
                [[OPEN-FONT-FORMAT]] [[TEXBOOK]] is actually to align the baselines of the
                overscripts and of the bases. This assumes that accent glyphs are designed in
                such a way that their ink bottoms are more or less
                <code class="MATH">AccentBaseHeight</code> above their baselines. Hence, the
                previous rule will guarantee that all the overscript bottoms are aligned while
                still avoiding collision with the bases. However, MathML can have arbitrary
                accent overscripts so we provide a more general and simpler rule above: Ensure
                that the bottom of overscript is at least
                <code class="MATH">AccentBaseHeight</code> above the baseline of the base.</p>
            </div>
            <figure id="F23">
              <img src="figures/munderoverbox.svg"/>
              <figcaption>Box model for the <code>munderover</code> element</figcaption>
            </figure>
            <div id="mundermover.p7">
              <p>The layout of <code>munder</code> and <code>mover</code> is the same as the one of
                <code>munderover</code> except that one script and its corresponding extra space
                are ignored.</p>
            </div>
          </section>
          <section id="mmultiscripts">
            <h3>Prescripts and Tensor Indices <code>&lt;mmultiscripts&gt;</code>
            </h3>

            <div id="mmultiscripts.p1">
              <p>Presubscripts and tensor notations are represented by a single element,
                <code>mmultiscripts</code>, using the syntax:
                <br/>
<pre>&lt;mmultiscripts&gt;
  base
  (subscript superscript)*
  [ &lt;mprescripts/&gt; (presubscript presuperscript)* ]
  &lt;/mmultiscripts&gt;
</pre>
                This element allows the representation of any number of vertically-aligned
                pairs of subscripts and superscripts, attached to one base expression. It
                supports both postscripts and prescripts. Missing scripts can be represented
                by the empty element <code>none</code>.
              </p>
            </div>
            <div id="mmultiscripts.p2">
              <p>The <code>displaystyle</code> and <code>scriptlevel</code> changes be achieved with the
                following style in the user agent stylesheet as suggested in
                <a href="#user-agent-stylesheet">Appendix B</a>:</p>
              <div>
<pre class="css">mmultiscripts > :not(:first-child) {
  mathml-script-level: increment 1;
  mathml-math-style: inline;
}</pre>
              </div>
            </div>
            <div id="mmultiscripts.p3">
              <p>Any layout for <code>mmultiscripts</code> is acceptable as long as it follows
                the condition of the MathML 3 specification [[MATHML3]] and is consistent
                with section <a href="#msubmsup"></a> for <code>mmultiscripts</code>
                contructions that are equivalent to <code>msubsup</code>. Here is a possible algorithm
                that is represented on figure <a href="#F24"></a>.</p>
              <ol id="I12">
                <li id="I12.i1">
                  <div id="I12.i1.p1">
                    <p>Determine the vertical shifts for each subscript/superscript pair
                      using the algorithm for <code>msub</code> (if the superscript is <code>none</code>),
                      <code>msup</code> (if the subscript is <code>none</code>) or <code>msubsup</code>
                      (if none of the scripts are <code>none</code>) or otherwise use shifts of zero
                      (if both scripts of the pair are <code>none</code>). When placing the scripts,
                      use the maximum of the subscript shift for all subscript and
                      the maximum of the superscript shift for all superscripts.</p>
                  </div>
                </li>
                <li id="I12.i2">
                  <div id="I12.i2.p1">
                    <p>For the horizontal layout of postscripts, use the trailing edge of the
                      base or of the previous pair as the leading edge of the current pair.
                      For each pair, apply the same italic correction described for
                      <code>msubsup</code> in section <a href="#msubmsup"></a>.
                      Apply the same italic corrections for all these postscripts.</p>
                  </div>
                </li>
                <li id="I12.i3">
                  <div id="I12.i3.p1">
                    <p>For the horizontal layout of prescripts, use the leading edge of the
                      base or of next pair as the trailing edge of the current pair. Do not apply
                      any italic correction for prescripts.</p>
                  </div>
                </li>
              </ol>
            </div>
            <figure id="F24">
              <img src="figures/mmultiscriptsbox.svg"/>
              <figcaption>Box model for the <code>mmultiscripts</code> element</figcaption>
            </figure>
          </section>
        </section>
        <section id="tables">
          <h2>Tabular Math</h2>

          <div id="tables.p1">
            <p>Matrices, arrays and other table-like mathematical notation are marked up using
              <code>mtable</code>, <code>mtr</code>, <code>mlabeledtr</code> and <code>mtd</code> elements. These
              elements are similar to the table, tr and td elements of HTML, except that they
              provide specialized attributes for the fine layout control necessary for
              commutative diagrams, block matrices and so on.</p>
          </div>
          <div id="tables.p2">
            <p>In the present document, we restrict ourselves to a minimal implementation
              compatible with HTML tables. First the <code>mtable</code> element must be treated as
              a HTML table and by [[MATHML3]], <code>mtable</code> must accept a
              <code>displaystyle</code> attribute with default value <code>false</code>. To implement that,
              one may rely on the following rules for the user agent stylesheet as
              suggested in
              <a href="#user-agent-stylesheet">Appendix B</a>:</p>
            <div>
<pre class="css">mtable {
  display: inline-table;
  mathml-math-style: inline;
}
mtable[displaystyle="true"] {
  mathml-math-style: display;
}</pre>
            </div>
          </div>
          <div id="tables.p3">
            <p>In addition, user agents may use the following rules to emulate the <code>frame</code>
              attribute:</p>
            <div>
<pre class="css">mtable[frame="none"] {
  border: none;
}
mtable[frame="solid"] {
  border: solid thin;
}
mtable[frame="dashed"] {
  border: dashed thin;
}</pre>
            </div>
          </div>
          <div id="tables.p4">
            <p>By default, user agents must align the vertical center of the table on the
              math axis, which is provided by the <code class="MATH">AxisHeight</code> value.
              User agents may also support non-default <code>align</code> attribute values.</p>
          </div>
          <div id="tables.p5">
            <p>The <code>mtr</code> and <code>mlabeledtr</code> elements must be treated as HTML table rows
              and the label of <code>mlabeledtr</code> element must be hidden by default.
              The default value of <code>rowalign</code> must be <code>baseline</code>.
              One may rely on the following rules for the user agent stylesheet
              as suggested in
              <a href="#user-agent-stylesheet">Appendix B</a>:</p>
          </div>
          <div id="tables.p6">
            <div>
<pre class="css">mtr, mlabeledtr {
  display: table-row;
    vertical-align: baseline;
  }
  mlabeledtr > mtd:first-child {
    display: none;
}</pre>
            </div>
          </div>
          <div id="tables.p7">
            <p>Finally, the <code>mtd</code> elements must be treated as a HTML table cell.
              The default value of <code>rowalign</code> must be <code>baseline</code> and
              the default value of <code>colulmnalign</code> must be <code>center</code>.
              User agents may also try to approximate the default <code>rowspacing</code> and
              <code>columnspacing</code> between cells. This can be achieved with the following CSS:</p>
          </div>
          <div id="tables.p8">
            <div>
<pre class="css">mtd {
  display: table-cell;
  vertical-align: inherit;
  text-align: center;
  padding: 0.5ex 0.4em;
}</pre>
            </div>
            <div id="tables.p9">
              <p>The <code>mtd</code> element must also support the <code>columnspan</code> (sic) and
                <code>rowspan</code> attributes. This can be implemented the same way as
                the HTML <code>colspan</code> and <code>rowspan</code> attributes.</p>
            </div>
          </div>
        </section>

        <section id="enlivening">
          <h2>Enlivening Expressions</h2>
          <p id="enlivening.p1">
            Historically, the <code>&lt;maction&gt;</code> element provides a mechanism
            for binding actions to expressions.
          </p>
          <p id="enlivening.p2">
            The <code>&lt;maction&gt;</code> element accepts the attributes described
            in section <a href="#global-attributes"></a>.
            The <code>actiontype</code> and <code>selection</code> attributes are
            also accepted but they do not have any effect.
          </p>
          <p id="enlivening.p3">
            The layout algorithm of the <code>&lt;maction&gt;</code> element
            the same as the <code>&lt;mrow&gt;</code> element.
            The User Agent stylesheet must contain the following properties from
            <a href="#user-agent-stylesheet">Appendix B</a> in order to hide all but
            its first child, which is the default behavior for the legacy actiontype
            values:
          </p>
          <div id="enlivening.p4">
<pre class="css">maction > :not(:first-child) {
  display: none;
}</pre>
          </div>
          <div class="note">
            Although <code>maction</code> is not really useful in modern web
            environments, it is preserved for backward compatibility reasons.
          </div>
        </section>

        <section id="sematicsandpresentation">
          <h2>Semantics and Presentation</h2>

          <div id="semantics.p1">
            <p>The <code>semantics</code> element is the container element that associates
              annotations with a MathML expression. The semantics element has as its first
              child the expression to be annotated. Any MathML expression may appear as the
              first child of the semantics element. Subsequent annotation and annotation-xml
              children enclose the annotations. An annotation represented in XML is enclosed
              in an <code>annotation-xml</code> element. An annotation represented in character data
              is enclosed in an <code>annotation</code> element.
            </p>
          </div>
          <div id="semantics.p2">
            <p>User agents must display at most one of the child of a <code>semantics</code> element.
              For example, they may always display the first child (if any) or may use this
              more advanced algorithm to determine a visible child:
            </p>
            <ol id="I14">
              <li id="I14.i1">
                <div id="I14.i1.p1">
                  <p>If the <code>semantics</code> element has a first child that is any of the
                    MathML elements (other than <code>annotation</code> and <code>annotation-xml</code>)
                    whose rendering is described in this document then use it as the visible
                    child and stop.</p>
                </div>
              </li>
              <li id="I14.i2">
                <div id="I14.i2.p1">
                  <p>Otherwise, check the children of the <code>semantics</code> element in the DOM
                    order to try and find the first child that is</p>
                  <ol id="I14.I1">
                    <li id="I14.I1.i1">
                      <div id="I14.I1.i1.p1">
                        <p>Either an <code>annotation</code> without any <code>src</code> attribute.</p>
                      </div>
                    </li>
                    <li id="I14.I1.i2">
                      <div id="I14.I1.i2.p1">
                        <p>Or an <code>annotation-xml</code> without any <code>src</code> attribute and
                          with an <code>encoding</code> attribute that has value
                          <code>"application/mathml-presentation+xml"</code>,
                          <code>"MathML-Presentation"</code>,
                          <code>"image/svg+xml"</code>,
                          <code>"SVG1.1"</code>,
                          <code>"application/xhtml+xml"</code> or
                          <code>"text/html"</code>.</p>
                      </div>
                    </li>
                  </ol>
                </div>
              </li>
              <li id="I14.i3">
                <div id="I14.i3.p1">
                  <p>Otherwise, fallback to the first child (if any).</p>
                </div>
              </li>
              <li id="I14.i4">
                <div id="I14.i4.p1">
                  <p>Otherwise, the <code>semantics</code> element is empty and the visible child is
                    undetermined.</p>
                </div>
              </li>
            </ol>
          </div>
          <div id="semantics.p3">
            <p>For the layout algorithm described in this document, the
              <code>annotation-xml</code> element must be treated the same as the <code>mrow</code> element,
              the <code>annotation</code> element must be treated the same as the <code>mtext</code>
              element. The <code>semantics</code> element must be treated the same as an
              <code>mrow</code> element containing only its visible child. If it is undetermined,
              the user agent may treat the <code>semantics</code> element as an
              empty <code>mrow</code> element or as an <code>merror</code> element with some error message
              indicating invalid markup.</p>
          </div>
        </section>
      </section>
    </section>
    <section class="appendix" class="informative">
      <h2>RelaxNG</h2>
      <p>
        This section displays a non-normative Relax NG Schema which
        details the elements and attributes defined by this specification.
        Note that MathML does not need to be expressed in XML syntax, in
        particular the syntax defined by HTML may be used. However this
        schema may be taken as an informal specification of the structure,
        whatever syntax is used.
      </p>
      <pre data-include="mathml-core.rnc"></pre>
    </section>
    <section class="appendix" id="user-agent-stylesheet">
      <h2>User Agent Stylesheet</h2>
      <p>Because mathematical formulas are generally written with special fonts, the
        default user agent stylesheet must reset the CSS <code>font-family</code> on the
        <code>math</code> element to <code>serif</code>. User agents should then use their own
        mechanism to try and interpret this <code>serif</code> value on the <code>math</code> element
        as a font with an OpenType MATH table.
      </p>
      <p>Below is an example on a stylesheet to style MathML elements on which the
        User Agents may rely. Unfortunately, some rendering engines do not allow
        universal selectors in their user agent stylesheets and so rules must be
        expanded to list all possible MathML elements described in the present
        document. For example <code>mfrac &gt; *</code> can be converted into
        <code>mfrac &gt; mi, mfrac &gt; mn, mfrac &gt; mo, mfrac &gt; mtext, mfrac &gt; mspace,
          mfrac &gt; ms, mfrac &gt; mrow, mfrac &gt; mfrac, mfrac &gt; msqrt, mfrac &gt; mroot,
          mfrac &gt; mstyle, mfrac &gt; merror, mfrac &gt; mpadded, mfrac &gt; mphantom,
          mfrac &gt; menclose, mfrac &gt; msub, mfrac &gt; msubsup, mfrac &gt; munder, mfrac &gt; mover,
          mfrac &gt; munderover, mfrac &gt; mmultiscripts, mfrac &gt; mtable, mfrac &gt; maction</code>.
      </p>
      <p>
        This section displays a non-normative Relax NG Schema which
        details the elements and attributes defined by this specification.
        Note that MathML does not need to be expressed in XML syntax, in
        particular the syntax defined by HTML may be used. However this
        schema may be taken as an informal specification of the structure,
        whatever syntax is used.
      </p>
      <pre data-include="user-agent-stylesheet.css"></pre>
    </section>
    <section id="op-dict">
      <h1>Operator Dictionary</h1>
      <p>The following table gives the suggested dictionary of rendering
        properties for operators, fences, separators, and accents in MathML, all of
        which are represented by <code>mo</code> elements. For brevity,
        all such elements will be called simply <q>operators</q> in this
        Appendix.</p>

      <section id="oper-dict_index"><h2>Indexing of the operator dictionary</h2>

        <p>Note that the dictionary is indexed not just by the element
          content, but by the element content and <code>form</code> attribute
          value, together. Operators with more than one possible form have more
          than one entry. The MathML specification describes how the renderer
          chooses (<q>infers</q>) which form to use when no <code>form</code>
          attribute is given; see <specref ref="presm_formdefval"/>. </p>

        <p>Having made that choice, or with the <code>form</code> attribute
          explicitly specified in the <code>&lt;mo&gt;</code> element's start
          tag, the MathML renderer uses the remaining attributes from the
          dictionary entry for the appropriate single form of that operator,
          ignoring the entries for the other possible forms.</p>


        <p>In the table below, all non-ASCII characters are represented by
          XML-style hexadecimal numeric character references.
          The choice of markup (character data, numeric character reference or named entity reference)
          for a given character in MathML has no effect on its rendering.</p>

      </section>


      <section id="oper-dict_format"><h2>Format of operator dictionary entries</h2>

        <p>Each row of the table is indexed as described above by the both the character
          (given by code point and Unicode Name) and the value of the form attribute.
          The fourth column gives the <kw>priority</kw> which as described in <a href="#">??</a>),
          is significant for the proper grouping of sub-expressions using <code>mrow</code>.
          The rule described
          there is especially relevant to the automatic generation of MathML by
          conversion from other formats for displayed mathematics, such as T<sub>E</sub>X,
          which do not always specify how sub-expressions nest.</p>

        <p>The length valued attributes such as <code>lspace</code> are given explicitly in the following columns.
          Boolean valued attributes such as <code>stretchy</code> are specified together in the final <kw>Properties</kw>
          column by listing the attribute name if its value should be set to <kw>true</kw> by the dictionary.
          Finally some rarely used non-boolean properties are shown in the Properties column together with a value,
          for example <code>linebreakstyle</code>=after.</p>

        <p>Any attribute not listed for some entry has its default value,
          which is given in parentheses in the table of attributes in <a href="#">??</a>.</p>

        <table>
          <tbody>
            <tr>
              <th>(</th>
              <th>(</th>
              <th role="uname">left parenthesis</th>
              <th>prefix</th>
              <td>1</td>
              <td>0</td>
              <td>0</td>
              <td/>
              <td>fence<phrase>,</phrase> stretchy</td>
            </tr>
          </tbody>
        </table>

        <p>could be expressed as an <code>mo</code> element by:
          <pre><![CDATA[
<mo form="prefix" fence="true" stretchy="true" lspace="0em" rspace="0em"> ( </mo>
]]></pre>
          (note the whitespace added around the content for readability;
          Such whitespace will be ignored by a MathML system,
          as described in <specref ref="fund_collapse" />.</p>

        <p>This entry means that, for MathML renderers which use this
          suggested operator dictionary, giving the element
          <code>&lt;mo form="prefix"> ( &lt;/mo></code>
          alone, or simply
          <code>&lt;mo> ( &lt;/mo></code>
          in a position for which
          <code>form="prefix"</code>
          would be inferred (see below), is equivalent to giving the element
          with all attributes as shown above.</p>

        <p>In some versions of this specification,
          the rows of the table may be reordered by clicking on a h2ing in the top row,
          to cause the table to be ordered by that column.</p>
      </section>


      <section id="oper-dict_space"><h2>Notes on <code>lspace</code> and
          <code>rspace</code> attributes</h2>

        <p>The values for <code>lspace</code> and <code>rspace</code> given here range from 0 to 7,
          they are given numerically in order to save space in the table,
          the values should be taken as referring to the named mathematical spaces, as follows.</p>
        <table>
          <thead>
            <tr><td>Table Entry</td><td>Named Space</td><td>Default Length</td></tr>
          </thead>
          <tbody>
            <tr><td>0</td><td/><td>0 em</td></tr>
            <tr>
              <td>1</td>
              <td>veryverythinmathspace</td>
              <td>1/18 em</td>
            </tr>
            <tr>
              <td>2</td>
              <td>verythinmathspace</td>
              <td>2/18 em</td>
            </tr>
            <tr>
              <td>3</td>
              <td>thinmathspace</td>
              <td>3/18 em</td>
            </tr>
            <tr>
              <td>4</td>
              <td>mediummathspace</td>
              <td>4/18 em</td>
            </tr>
            <tr>
              <td>5</td>
              <td>thickmathspace</td>
              <td>5/18 em</td>
            </tr>
            <tr>
              <td>6</td>
              <td>verythickmathspace</td>
              <td>6/18 em</td>
            </tr>
            <tr>
              <td>7</td>
              <td>veryverythickmathspace</td>
              <td>7/18 em</td>
            </tr>
          </tbody>
        </table>
        <p>
          For the invisible operators whose content is <code>&amp;InvisibleTimes;</code>
          or <code>&amp;ApplyFunction;</code>,
          it is suggested that MathML renderers choose spacing in a context-sensitive
          way (which is an exception to the static values given in the following
          table). For <code>&lt;mo>&amp;ApplyFunction;&lt;/mo></code>, the total
          spacing (<attval>lspace</attval>+<attval>rspace</attval>) in
          expressions such as <q>sin <i>x</i></q> (where the right operand
          doesn't start with a fence) should be greater than zero; for
          <code>&lt;mo>&amp;InvisibleTimes;&lt;/mo></code>, the total spacing
          should be greater than zero when both operands (or the nearest tokens on
          either side, if on the baseline) are identifiers displayed in a non-slanted
          font (i.e.. under the suggested rules, when both operands are
          multi-character identifiers).</p>

      </section>

      <section id="oper-dict_entries-table">
        <h3>Operator dictionary entries</h3>
      <div data-include="op-dict.html"></div>
      </section>
    </section>
    <section id="comb-equiv">
      <h2>MathML Combining Character Equivalences</h2>
      <p>
        The following table gives mappings between spacing and non spacing
        characters when used in MathML accent constructs.
      </p>
      <div data-include="comb-table.html"></div>
    </section>
    <section id="conformance-" class="appendix">
      <h2>Conformance</h2>
      <section>
        <h3>Document conventions</h3>
        <p>
          Conformance requirements are expressed with a combination of
	  descriptive assertions and RFC 2119 terminology. The key words “MUST”,
	  “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
	  “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
	  document are to be interpreted as described in RFC 2119.
	  However, for readability, these words do not appear in all uppercase
	  letters in this specification.
        </p>
        <p>
          All of the text of this specification is normative except sections
	  explicitly marked as non-normative, examples, and notes.
          [[RFC2119]].</p>
        <p>
          Examples in this specification are introduced with the words
          “for example” or are set apart from the normative text with
          <code>class="example"</code>, like this:
        </p>
        <div class="example">
          <p>This is an example of an informative example.</p>
        </div>
        <p>
          Informative notes begin with the word “Note” and are set apart from
          the normative text with <code>class="note"</code>, like this:
        </p>
        <p class="note">
          Note, this is an informative note.
        </p>
        <p>Advisements are normative sections styled to evoke special attention
          and are set apart from other normative text with
          <code>&lt;strong class="advisement"&gt;</code>, like this:
          <strong class="advisement">UAs MUST provide an accessible alternative. </strong>
        </p>
        <p>
          Definitions taken the MATH specification of [[OPEN-FONT-FORMAT]]
          are written with the following style:
          <code class="MATH">MyMathTableParameter</code>.
        </p>
      </section>
    </section>
  </body>
</html>
